var PaginationRender;(()=>{"use strict";var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{t.r(e),t.d(e,{PaginationRender:()=>n});class n{_paginationManager;_containerElement;_listElement;_footerElement;_listItemTemplate;_emptyListTemplate;_headerOptions;_containerOptions;_footerOptions;_listContainerTag;constructor(t,e){this._paginationManager=t,[this._headerOptions,this._containerOptions,this._footerOptions]=[e?.headerOptions,e?.containerOptions,e?.footerOptions],this._listItemTemplate=e.setup.listItemTemplate,this._emptyListTemplate=e.setup.emptyListTemplate,this._listContainerTag=e.setup.listContainerTag||"ul",this._containerElement=document.querySelector(e.setup.containerQuerySelector)||document.createElement("div"),this._footerElement=this.renderFooter(),this._containerElement.insertAdjacentElement("beforeend",this._footerElement),this._listElement=this.renderListElement(),this._containerElement.insertAdjacentElement("afterbegin",this._listElement),this._containerOptions?.classList&&this._containerElement.classList.add(...this._containerOptions.classList.split(" "))}getButtonId(t){return`btnPagination${this._containerElement.id.capitalizeFirstLetter()}${t+1}`}getItemListId(){return`listPagination${this._containerElement.id.capitalizeFirstLetter()}`}getFooterId(){return`footerPagination${this._containerElement.id.capitalizeFirstLetter()}`}renderListElement(){if(document.getElementById(this.getItemListId()))return document.getElementById(this.getItemListId());const t=document.createElement(this._listContainerTag);return t.id=this.getItemListId(),t}resetFooter(){this._footerElement=this.renderFooter(),this._paginationManager.sourceString&&this._footerElement.insertAdjacentHTML("beforeend",`\n        <div class="contador-footer-fetch">\n          <span>Página: ${this._paginationManager.index+1}</span>\n          <span>Nº de Resultados: ${this._paginationManager.currentPageData?this._paginationManager.currentPageData.length:0}</span>\n        </div>`),this._containerElement.insertAdjacentElement("beforeend",this._footerElement)}async tryRenderCurrentPageList(){let t;return t=this._paginationManager.sourceString?await this._paginationManager.fetchCurrentPage():this._paginationManager.sourceArray.slice(this._paginationManager.index*this._paginationManager.amountPerPage,(this._paginationManager.index+1)*this._paginationManager.amountPerPage),!t||t.length<1?(this._listElement.insertAdjacentElement("beforeend",this._emptyListTemplate()),!1):(this._listElement.removeAllChildren(),t.forEach((t=>{const e=this._listItemTemplate(t);e.classList.add("pagination-list-item"),this._listElement.insertAdjacentElement("beforeend",e)})),this._paginationManager.currentPageData=t,!0)}renderFooter(){(this._footerElement||document.getElementById(this.getFooterId()))&&document.getElementById(this.getFooterId())?.remove();const t=document.createElement("div");t.id=this.getFooterId();const e=document.createElement("button"),n=document.createElement("button");return e.setAttribute("type","button"),n.setAttribute("type","button"),[e.innerText,n.innerText]=[this._footerOptions?.prevButtonText||"Previous",this._footerOptions?.nextButtonText||"Next"],e.classList.add("btn-pagination","btn-pagination-prev"),n.classList.add("btn-pagination","btn-pagination-next"),[e.onclick,n.onclick]=[()=>this._paginationManager.previous(),()=>this._paginationManager.next()],t.insertAdjacentElement("beforeend",e),this.makeFooterButtonList(t),t.insertAdjacentElement("beforeend",n),t}makeFooterButtonList(t){const e=document.createElement("div");e.classList.add("btn-pagination-inner-list"),t.insertAdjacentElement("beforeend",e),this._footerOptions?.truncateLength&&this._footerOptions?.truncateLength>0?[...Array(this._paginationManager.numPages).keys()].truncate(this._paginationManager.index,this._footerOptions.truncateLength,-1,this._footerOptions.truncateOptions).forEach((t=>e.insertAdjacentElement("beforeend",this.makeFooterButton(t)))):[...Array(this._paginationManager.numPages).keys()].forEach((t=>e.insertAdjacentElement("beforeend",this.makeFooterButton(t))))}makeFooterButton(t){const e=document.createElement("button");return e.id=this.getButtonId(t),e.classList.add("btn-pagination"),e.setAttribute("type","button"),t===this._paginationManager.index&&e.classList.add("active"),this._footerOptions?.buttonClassList&&e.classList.add(...this._footerOptions.buttonClassList.split(" ")),this._footerOptions?.truncateLength&&this._footerOptions?.truncateLength>0&&-1===t?e.classList.add("btn-pagination-decorator"):e.onclick=()=>this._paginationManager.peek(t),this._footerOptions?.buttonTextFormula?e.innerText=this._footerOptions.buttonTextFormula(t):e.innerText=-1!==t?`${t+1}`:this._footerOptions?.truncateDecorator||"...",e}}})(),PaginationRender=e})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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NUMsR0FFdkR5QyxFQUFJZixXQUF1QixJQUFYMUIsRUFBZSxHQUFJQSxFQUFRLElBQU9uQixLQUFLTCxnQkFBZ0JxRSxtQkFBcUIsTUFHdkZKLENBQ1QsRSIsInNvdXJjZXMiOlsid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly8vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovLy8uL1BhZ2luYXRpb25SZW5kZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJpbXBvcnQgeyBQYWdpbmF0aW9uIH0gZnJvbSAnLi9QYWdpbmF0aW9uJztcclxuaW1wb3J0IHsgSVBhZ2luYXRpb25Db250YWluZXJPcHRpb25zLCBJUGFnaW5hdGlvbkZvb3Rlck9wdGlvbnMsIElQYWdpbmF0aW9uSGVhZGVyT3B0aW9ucywgSVBhZ2luYXRpb25NYW5kYXRvcnlPcHRpb25zIH0gZnJvbSAnLi9QYWdpbmF0aW9uVHlwZXMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBhZ2luYXRpb25SZW5kZXIge1xyXG4gIHByaXZhdGUgX3BhZ2luYXRpb25NYW5hZ2VyOiBQYWdpbmF0aW9uO1xyXG4gIHByaXZhdGUgX2NvbnRhaW5lckVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50O1xyXG4gIHByaXZhdGUgX2xpc3RFbGVtZW50OiBIVE1MRWxlbWVudDtcclxuICBwcml2YXRlIF9mb290ZXJFbGVtZW50OiBIVE1MRGl2RWxlbWVudDtcclxuICBwcml2YXRlIF9saXN0SXRlbVRlbXBsYXRlOiAoIGFyZ3M6IG9iamVjdCApID0+IEhUTUxMSUVsZW1lbnQ7XHJcbiAgcHJpdmF0ZSBfZW1wdHlMaXN0VGVtcGxhdGU6ICgpID0+IEhUTUxFbGVtZW50O1xyXG4gIHByaXZhdGUgX2hlYWRlck9wdGlvbnM/OiBJUGFnaW5hdGlvbkhlYWRlck9wdGlvbnM7XHJcbiAgcHJpdmF0ZSBfY29udGFpbmVyT3B0aW9ucz86IElQYWdpbmF0aW9uQ29udGFpbmVyT3B0aW9ucztcclxuICBwcml2YXRlIF9mb290ZXJPcHRpb25zPzogSVBhZ2luYXRpb25Gb290ZXJPcHRpb25zO1xyXG4gIHByaXZhdGUgX2xpc3RDb250YWluZXJUYWc/OiBzdHJpbmc7XHJcblxyXG4gIGNvbnN0cnVjdG9yKCBwYWdpbmF0aW9uT2JqZWN0OiBQYWdpbmF0aW9uLCBvcHRpb25zOiB7XHJcbiAgICBzZXR1cDogSVBhZ2luYXRpb25NYW5kYXRvcnlPcHRpb25zLFxyXG4gICAgaGVhZGVyT3B0aW9ucz86IElQYWdpbmF0aW9uSGVhZGVyT3B0aW9ucyxcclxuICAgIGNvbnRhaW5lck9wdGlvbnM/OiBJUGFnaW5hdGlvbkNvbnRhaW5lck9wdGlvbnMsXHJcbiAgICBmb290ZXJPcHRpb25zPzogSVBhZ2luYXRpb25Gb290ZXJPcHRpb25zXHJcbiAgfSApIHtcclxuICAgIHRoaXMuX3BhZ2luYXRpb25NYW5hZ2VyID0gcGFnaW5hdGlvbk9iamVjdDtcclxuXHJcbiAgICBbdGhpcy5faGVhZGVyT3B0aW9ucywgdGhpcy5fY29udGFpbmVyT3B0aW9ucywgdGhpcy5fZm9vdGVyT3B0aW9uc10gPSBbb3B0aW9ucz8uaGVhZGVyT3B0aW9ucywgb3B0aW9ucz8uY29udGFpbmVyT3B0aW9ucywgb3B0aW9ucz8uZm9vdGVyT3B0aW9uc11cclxuICAgIHRoaXMuX2xpc3RJdGVtVGVtcGxhdGUgPSBvcHRpb25zLnNldHVwLmxpc3RJdGVtVGVtcGxhdGU7XHJcbiAgICB0aGlzLl9lbXB0eUxpc3RUZW1wbGF0ZSA9IG9wdGlvbnMuc2V0dXAuZW1wdHlMaXN0VGVtcGxhdGU7XHJcbiAgICB0aGlzLl9saXN0Q29udGFpbmVyVGFnID0gb3B0aW9ucy5zZXR1cC5saXN0Q29udGFpbmVyVGFnIHx8ICd1bCc7XHJcblxyXG4gICAgdGhpcy5fY29udGFpbmVyRWxlbWVudCA9ICggZG9jdW1lbnQucXVlcnlTZWxlY3Rvciggb3B0aW9ucy5zZXR1cC5jb250YWluZXJRdWVyeVNlbGVjdG9yICkgfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicgKSApIGFzIEhUTUxEaXZFbGVtZW50O1xyXG5cclxuICAgIHRoaXMuX2Zvb3RlckVsZW1lbnQgPSB0aGlzLnJlbmRlckZvb3RlcigpO1xyXG4gICAgdGhpcy5fY29udGFpbmVyRWxlbWVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoICdiZWZvcmVlbmQnLCB0aGlzLl9mb290ZXJFbGVtZW50ICk7XHJcblxyXG4gICAgdGhpcy5fbGlzdEVsZW1lbnQgPSB0aGlzLnJlbmRlckxpc3RFbGVtZW50KCk7XHJcbiAgICB0aGlzLl9jb250YWluZXJFbGVtZW50Lmluc2VydEFkamFjZW50RWxlbWVudCggJ2FmdGVyYmVnaW4nLCB0aGlzLl9saXN0RWxlbWVudCApO1xyXG5cclxuXHJcbiAgICBpZiAoIHRoaXMuX2NvbnRhaW5lck9wdGlvbnM/LmNsYXNzTGlzdCApIHtcclxuICAgICAgdGhpcy5fY29udGFpbmVyRWxlbWVudC5jbGFzc0xpc3QuYWRkKCAuLi50aGlzLl9jb250YWluZXJPcHRpb25zLmNsYXNzTGlzdC5zcGxpdCggJyAnICkgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldEJ1dHRvbklkKCBpbmRleDogbnVtYmVyICk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gYGJ0blBhZ2luYXRpb24keyB0aGlzLl9jb250YWluZXJFbGVtZW50LmlkLmNhcGl0YWxpemVGaXJzdExldHRlcigpIH0keyBpbmRleCArIDEgfWA7XHJcbiAgfVxyXG5cclxuXHJcbiAgZ2V0SXRlbUxpc3RJZCgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIGBsaXN0UGFnaW5hdGlvbiR7IHRoaXMuX2NvbnRhaW5lckVsZW1lbnQuaWQuY2FwaXRhbGl6ZUZpcnN0TGV0dGVyKCkgfWA7XHJcbiAgfVxyXG5cclxuICBnZXRGb290ZXJJZCgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIGBmb290ZXJQYWdpbmF0aW9uJHsgdGhpcy5fY29udGFpbmVyRWxlbWVudC5pZC5jYXBpdGFsaXplRmlyc3RMZXR0ZXIoKSB9YDtcclxuICB9XHJcblxyXG4gIHJlbmRlckxpc3RFbGVtZW50KCk6IEhUTUxFbGVtZW50IHtcclxuICAgIGlmICggZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIHRoaXMuZ2V0SXRlbUxpc3RJZCgpICkgKSB7XHJcbiAgICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggdGhpcy5nZXRJdGVtTGlzdElkKCkgKSBhcyBIVE1MRWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBsaXN0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIHRoaXMuX2xpc3RDb250YWluZXJUYWchICk7XHJcbiAgICBsaXN0RWxlbWVudC5pZCA9IHRoaXMuZ2V0SXRlbUxpc3RJZCgpO1xyXG4gICAgcmV0dXJuIGxpc3RFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgcmVzZXRGb290ZXIoKSB7XHJcbiAgICB0aGlzLl9mb290ZXJFbGVtZW50ID0gdGhpcy5yZW5kZXJGb290ZXIoKTtcclxuICAgIGlmICggdGhpcy5fcGFnaW5hdGlvbk1hbmFnZXIuc291cmNlU3RyaW5nICkge1xyXG4gICAgICB0aGlzLl9mb290ZXJFbGVtZW50Lmluc2VydEFkamFjZW50SFRNTCggJ2JlZm9yZWVuZCcsIGBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFkb3ItZm9vdGVyLWZldGNoXCI+XHJcbiAgICAgICAgICA8c3Bhbj5Qw6FnaW5hOiAkeyB0aGlzLl9wYWdpbmF0aW9uTWFuYWdlci5pbmRleCArIDEgfTwvc3Bhbj5cclxuICAgICAgICAgIDxzcGFuPk7CuiBkZSBSZXN1bHRhZG9zOiAkeyB0aGlzLl9wYWdpbmF0aW9uTWFuYWdlci5jdXJyZW50UGFnZURhdGEgPyB0aGlzLl9wYWdpbmF0aW9uTWFuYWdlci5jdXJyZW50UGFnZURhdGEubGVuZ3RoIDogMCB9PC9zcGFuPlxyXG4gICAgICAgIDwvZGl2PmAgKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9jb250YWluZXJFbGVtZW50Lmluc2VydEFkamFjZW50RWxlbWVudCggJ2JlZm9yZWVuZCcsIHRoaXMuX2Zvb3RlckVsZW1lbnQgKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHRyeVJlbmRlckN1cnJlbnRQYWdlTGlzdCgpIHtcclxuICAgIGxldCBjdXJyZW50UGFnZURhdGE7XHJcblxyXG4gICAgaWYgKCB0aGlzLl9wYWdpbmF0aW9uTWFuYWdlci5zb3VyY2VTdHJpbmcgKSB7XHJcbiAgICAgIGN1cnJlbnRQYWdlRGF0YSA9IGF3YWl0IHRoaXMuX3BhZ2luYXRpb25NYW5hZ2VyLmZldGNoQ3VycmVudFBhZ2UoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGN1cnJlbnRQYWdlRGF0YSA9IHRoaXMuX3BhZ2luYXRpb25NYW5hZ2VyLnNvdXJjZUFycmF5LnNsaWNlKCB0aGlzLl9wYWdpbmF0aW9uTWFuYWdlci5pbmRleCAqIHRoaXMuX3BhZ2luYXRpb25NYW5hZ2VyLmFtb3VudFBlclBhZ2UsICggdGhpcy5fcGFnaW5hdGlvbk1hbmFnZXIuaW5kZXggKyAxICkgKiB0aGlzLl9wYWdpbmF0aW9uTWFuYWdlci5hbW91bnRQZXJQYWdlICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCAhY3VycmVudFBhZ2VEYXRhIHx8IGN1cnJlbnRQYWdlRGF0YS5sZW5ndGggPCAxICkge1xyXG4gICAgICB0aGlzLl9saXN0RWxlbWVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoICdiZWZvcmVlbmQnLCB0aGlzLl9lbXB0eUxpc3RUZW1wbGF0ZSgpICk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9saXN0RWxlbWVudC5yZW1vdmVBbGxDaGlsZHJlbigpO1xyXG5cclxuICAgIGN1cnJlbnRQYWdlRGF0YS5mb3JFYWNoKCAoIGVsZW1lbnQ6IGFueSApID0+IHtcclxuICAgICAgY29uc3QgbGlFbGVtZW50ID0gdGhpcy5fbGlzdEl0ZW1UZW1wbGF0ZSggZWxlbWVudCApO1xyXG4gICAgICBsaUVsZW1lbnQuY2xhc3NMaXN0LmFkZCggJ3BhZ2luYXRpb24tbGlzdC1pdGVtJyApO1xyXG4gICAgICB0aGlzLl9saXN0RWxlbWVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoICdiZWZvcmVlbmQnLCBsaUVsZW1lbnQgKTtcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLl9wYWdpbmF0aW9uTWFuYWdlci5jdXJyZW50UGFnZURhdGEgPSBjdXJyZW50UGFnZURhdGE7XHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICByZW5kZXJGb290ZXIoKSB7XHJcbiAgICBpZiAoIHRoaXMuX2Zvb3RlckVsZW1lbnQgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIHRoaXMuZ2V0Rm9vdGVySWQoKSApICkge1xyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggdGhpcy5nZXRGb290ZXJJZCgpICk/LnJlbW92ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZvb3RlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnICk7XHJcbiAgICBmb290ZXIuaWQgPSB0aGlzLmdldEZvb3RlcklkKCk7XHJcblxyXG4gICAgY29uc3QgYnRuUHJldiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdidXR0b24nICk7XHJcbiAgICBjb25zdCBidG5OZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2J1dHRvbicgKTtcclxuICAgIGJ0blByZXYuc2V0QXR0cmlidXRlKCAndHlwZScsICdidXR0b24nICk7XHJcbiAgICBidG5OZXh0LnNldEF0dHJpYnV0ZSggJ3R5cGUnLCAnYnV0dG9uJyApO1xyXG5cclxuICAgIFtidG5QcmV2LmlubmVyVGV4dCwgYnRuTmV4dC5pbm5lclRleHRdID0gW3RoaXMuX2Zvb3Rlck9wdGlvbnM/LnByZXZCdXR0b25UZXh0IHx8ICdQcmV2aW91cycsIHRoaXMuX2Zvb3Rlck9wdGlvbnM/Lm5leHRCdXR0b25UZXh0IHx8ICdOZXh0J107XHJcbiAgICBidG5QcmV2LmNsYXNzTGlzdC5hZGQoICdidG4tcGFnaW5hdGlvbicsICdidG4tcGFnaW5hdGlvbi1wcmV2JyApO1xyXG4gICAgYnRuTmV4dC5jbGFzc0xpc3QuYWRkKCAnYnRuLXBhZ2luYXRpb24nLCAnYnRuLXBhZ2luYXRpb24tbmV4dCcgKTtcclxuICAgIFtidG5QcmV2Lm9uY2xpY2ssIGJ0bk5leHQub25jbGlja10gPSBbKCkgPT4gdGhpcy5fcGFnaW5hdGlvbk1hbmFnZXIucHJldmlvdXMoKSwgKCkgPT4gdGhpcy5fcGFnaW5hdGlvbk1hbmFnZXIubmV4dCgpXTtcclxuXHJcbiAgICBmb290ZXIuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCAnYmVmb3JlZW5kJywgYnRuUHJldiApO1xyXG5cclxuICAgIHRoaXMubWFrZUZvb3RlckJ1dHRvbkxpc3QoIGZvb3RlciApO1xyXG5cclxuICAgIGZvb3Rlci5pbnNlcnRBZGphY2VudEVsZW1lbnQoICdiZWZvcmVlbmQnLCBidG5OZXh0ICk7XHJcblxyXG4gICAgcmV0dXJuIGZvb3RlcjtcclxuICB9XHJcblxyXG5cclxuICBwcml2YXRlIG1ha2VGb290ZXJCdXR0b25MaXN0KCBmb290ZXI6IEhUTUxEaXZFbGVtZW50ICkge1xyXG4gICAgY29uc3QgYnV0dG9uSW5uZXJMaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicgKTtcclxuICAgIGJ1dHRvbklubmVyTGlzdC5jbGFzc0xpc3QuYWRkKCAnYnRuLXBhZ2luYXRpb24taW5uZXItbGlzdCcgKTtcclxuICAgIGZvb3Rlci5pbnNlcnRBZGphY2VudEVsZW1lbnQoICdiZWZvcmVlbmQnLCBidXR0b25Jbm5lckxpc3QgKVxyXG5cclxuICAgIGlmICggdGhpcy5fZm9vdGVyT3B0aW9ucz8udHJ1bmNhdGVMZW5ndGggJiYgdGhpcy5fZm9vdGVyT3B0aW9ucz8udHJ1bmNhdGVMZW5ndGggPiAwICkge1xyXG4gICAgICBbLi4uQXJyYXkoIHRoaXMuX3BhZ2luYXRpb25NYW5hZ2VyLm51bVBhZ2VzICkua2V5cygpXVxyXG4gICAgICAgIC50cnVuY2F0ZSggdGhpcy5fcGFnaW5hdGlvbk1hbmFnZXIuaW5kZXgsIHRoaXMuX2Zvb3Rlck9wdGlvbnMudHJ1bmNhdGVMZW5ndGgsIC0xLCB0aGlzLl9mb290ZXJPcHRpb25zLnRydW5jYXRlT3B0aW9ucyApXHJcbiAgICAgICAgLmZvckVhY2goIGluZGV4ID0+IGJ1dHRvbklubmVyTGlzdC5pbnNlcnRBZGphY2VudEVsZW1lbnQoICdiZWZvcmVlbmQnLCB0aGlzLm1ha2VGb290ZXJCdXR0b24oIGluZGV4ICkgKSApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgWy4uLkFycmF5KCB0aGlzLl9wYWdpbmF0aW9uTWFuYWdlci5udW1QYWdlcyApLmtleXMoKV1cclxuICAgICAgICAuZm9yRWFjaCggaW5kZXggPT4gYnV0dG9uSW5uZXJMaXN0Lmluc2VydEFkamFjZW50RWxlbWVudCggJ2JlZm9yZWVuZCcsIHRoaXMubWFrZUZvb3RlckJ1dHRvbiggaW5kZXggKSApICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG1ha2VGb290ZXJCdXR0b24oIGluZGV4OiBudW1iZXIgKTogSFRNTEJ1dHRvbkVsZW1lbnQge1xyXG4gICAgY29uc3QgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2J1dHRvbicgKTtcclxuICAgIGJ0bi5pZCA9IHRoaXMuZ2V0QnV0dG9uSWQoIGluZGV4ICk7XHJcbiAgICBidG4uY2xhc3NMaXN0LmFkZCggJ2J0bi1wYWdpbmF0aW9uJyApO1xyXG4gICAgYnRuLnNldEF0dHJpYnV0ZSggJ3R5cGUnLCAnYnV0dG9uJyApO1xyXG4gICAgaWYgKCBpbmRleCA9PT0gdGhpcy5fcGFnaW5hdGlvbk1hbmFnZXIuaW5kZXggKSB7XHJcbiAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCAnYWN0aXZlJyApO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICggdGhpcy5fZm9vdGVyT3B0aW9ucz8uYnV0dG9uQ2xhc3NMaXN0ICkge1xyXG4gICAgICBidG4uY2xhc3NMaXN0LmFkZCggLi4udGhpcy5fZm9vdGVyT3B0aW9ucy5idXR0b25DbGFzc0xpc3Quc3BsaXQoICcgJyApICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCB0aGlzLl9mb290ZXJPcHRpb25zPy50cnVuY2F0ZUxlbmd0aCAmJiB0aGlzLl9mb290ZXJPcHRpb25zPy50cnVuY2F0ZUxlbmd0aCA+IDAgJiYgaW5kZXggPT09IC0xICkge1xyXG4gICAgICBidG4uY2xhc3NMaXN0LmFkZCggJ2J0bi1wYWdpbmF0aW9uLWRlY29yYXRvcicgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5fcGFnaW5hdGlvbk1hbmFnZXIucGVlayggaW5kZXggKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIHRoaXMuX2Zvb3Rlck9wdGlvbnM/LmJ1dHRvblRleHRGb3JtdWxhICkge1xyXG4gICAgICBidG4uaW5uZXJUZXh0ID0gdGhpcy5fZm9vdGVyT3B0aW9ucy5idXR0b25UZXh0Rm9ybXVsYSggaW5kZXggKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGJ0bi5pbm5lclRleHQgPSBpbmRleCAhPT0gLTEgPyBgJHsgaW5kZXggKyAxIH1gIDogdGhpcy5fZm9vdGVyT3B0aW9ucz8udHJ1bmNhdGVEZWNvcmF0b3IgfHwgJy4uLic7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGJ0bjtcclxuICB9XHJcblxyXG59Il0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsIlBhZ2luYXRpb25SZW5kZXIiLCJfcGFnaW5hdGlvbk1hbmFnZXIiLCJfY29udGFpbmVyRWxlbWVudCIsIl9saXN0RWxlbWVudCIsIl9mb290ZXJFbGVtZW50IiwiX2xpc3RJdGVtVGVtcGxhdGUiLCJfZW1wdHlMaXN0VGVtcGxhdGUiLCJfaGVhZGVyT3B0aW9ucyIsIl9jb250YWluZXJPcHRpb25zIiwiX2Zvb3Rlck9wdGlvbnMiLCJfbGlzdENvbnRhaW5lclRhZyIsImNvbnN0cnVjdG9yIiwicGFnaW5hdGlvbk9iamVjdCIsIm9wdGlvbnMiLCJ0aGlzIiwiaGVhZGVyT3B0aW9ucyIsImNvbnRhaW5lck9wdGlvbnMiLCJmb290ZXJPcHRpb25zIiwic2V0dXAiLCJsaXN0SXRlbVRlbXBsYXRlIiwiZW1wdHlMaXN0VGVtcGxhdGUiLCJsaXN0Q29udGFpbmVyVGFnIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGFpbmVyUXVlcnlTZWxlY3RvciIsImNyZWF0ZUVsZW1lbnQiLCJyZW5kZXJGb290ZXIiLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJyZW5kZXJMaXN0RWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInNwbGl0IiwiZ2V0QnV0dG9uSWQiLCJpbmRleCIsImlkIiwiY2FwaXRhbGl6ZUZpcnN0TGV0dGVyIiwiZ2V0SXRlbUxpc3RJZCIsImdldEZvb3RlcklkIiwiZ2V0RWxlbWVudEJ5SWQiLCJsaXN0RWxlbWVudCIsInJlc2V0Rm9vdGVyIiwic291cmNlU3RyaW5nIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwiY3VycmVudFBhZ2VEYXRhIiwibGVuZ3RoIiwidHJ5UmVuZGVyQ3VycmVudFBhZ2VMaXN0IiwiZmV0Y2hDdXJyZW50UGFnZSIsInNvdXJjZUFycmF5Iiwic2xpY2UiLCJhbW91bnRQZXJQYWdlIiwicmVtb3ZlQWxsQ2hpbGRyZW4iLCJmb3JFYWNoIiwiZWxlbWVudCIsImxpRWxlbWVudCIsInJlbW92ZSIsImZvb3RlciIsImJ0blByZXYiLCJidG5OZXh0Iiwic2V0QXR0cmlidXRlIiwiaW5uZXJUZXh0IiwicHJldkJ1dHRvblRleHQiLCJuZXh0QnV0dG9uVGV4dCIsIm9uY2xpY2siLCJwcmV2aW91cyIsIm5leHQiLCJtYWtlRm9vdGVyQnV0dG9uTGlzdCIsImJ1dHRvbklubmVyTGlzdCIsInRydW5jYXRlTGVuZ3RoIiwiQXJyYXkiLCJudW1QYWdlcyIsImtleXMiLCJ0cnVuY2F0ZSIsInRydW5jYXRlT3B0aW9ucyIsIm1ha2VGb290ZXJCdXR0b24iLCJidG4iLCJidXR0b25DbGFzc0xpc3QiLCJwZWVrIiwiYnV0dG9uVGV4dEZvcm11bGEiLCJ0cnVuY2F0ZURlY29yYXRvciJdLCJzb3VyY2VSb290IjoiIn0=