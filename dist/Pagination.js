var Pagination;(()=>{"use strict";var t={589:()=>{function t(t=0,e=0,n=100){return Math.max(e,Math.min(t,n))}Array.prototype.joinAsString=function(){return this.reduce(((t,e)=>t?`${t}, ${e}`:`${e}`),"")},Array.prototype.getTotal=function(){return this.reduce(((t,e)=>t?t+e:e),0)},Array.prototype.truncate=function(e,n,i,r){if(this.length<=n)return this;const s=!(!r||void 0===r.truncateLeft||r.truncateLeft),a=r&&r.truncateLeftStart&&e<r.truncateLeftStart,o=t(s||a?0:e-n/2,0,e-1),h=this.slice(o,e),c=[];o>(n%2==0?0:1)&&i&&c.push(this[0],i);const u=!(!r||void 0===r.truncateRight||r.truncateRight),l=r&&r.truncateRightStart&&e<r.truncateRightStart,g=t(u||l?this.length:e+1+n/2,e,this.length),p=this.slice(e,g);let d=[this[this.length-1]];return g<this.length&&i&&d.unshift(i),this.length-g==1?d.shift():this.length-g==0&&(d=[]),[...c,...h,...p,...d]}},631:()=>{HTMLElement.prototype.removeAllChildren=function(){for(;this.hasChildNodes();)this.firstChild&&this.removeChild(this.firstChild)},HTMLElement.prototype.makeCover=function(){this.style.display="flex",this.style.width="100%",this.style.height="100%",this.style.position="absolute",this.style.top="0",this.style.left="0"}},19:(t,e,n)=>{function i(t=0,e=0,n=100){return Math.max(e,Math.min(t,n))}n.d(e,{clamp:()=>i})},858:(t,e,n)=>{n.d(e,{PaginationRender:()=>i});class i{_paginationManager;_containerElement;_listElement;_footerElement;_listItemTemplate;_emptyListTemplate;_headerOptions;_containerOptions;_footerOptions;_listContainerTag;constructor(t,e){this._paginationManager=t,[this._headerOptions,this._containerOptions,this._footerOptions]=[e?.headerOptions,e?.containerOptions,e?.footerOptions],this._listItemTemplate=e.setup.listItemTemplate,this._emptyListTemplate=e.setup.emptyListTemplate,this._listContainerTag=e.setup.listContainerTag||"ul",this._containerElement=document.querySelector(e.setup.containerQuerySelector)||document.createElement("div"),this._footerElement=this.renderFooter(),this._containerElement.insertAdjacentElement("beforeend",this._footerElement),this._listElement=this.renderListElement(),this._containerElement.insertAdjacentElement("afterbegin",this._listElement),this._containerOptions?.classList&&this._containerElement.classList.add(...this._containerOptions.classList.split(" "))}getButtonId(t){return`btnPagination${this._containerElement.id.capitalizeFirstLetter()}${t+1}`}getItemListId(){return`listPagination${this._containerElement.id.capitalizeFirstLetter()}`}getFooterId(){return`footerPagination${this._containerElement.id.capitalizeFirstLetter()}`}renderListElement(){if(document.getElementById(this.getItemListId()))return document.getElementById(this.getItemListId());const t=document.createElement(this._listContainerTag);return t.id=this.getItemListId(),t}resetFooter(){this._footerElement=this.renderFooter(),this._paginationManager.sourceString&&this._footerElement.insertAdjacentHTML("beforeend",`\n        <div class="contador-footer-fetch">\n          <span>Página: ${this._paginationManager.index+1}</span>\n          <span>Nº de Resultados: ${this._paginationManager.currentPageData?this._paginationManager.currentPageData.length:0}</span>\n        </div>`),this._containerElement.insertAdjacentElement("beforeend",this._footerElement)}async tryRenderCurrentPageList(){let t;return t=this._paginationManager.sourceString?await this._paginationManager.fetchCurrentPage():this._paginationManager.sourceArray.slice(this._paginationManager.index*this._paginationManager.amountPerPage,(this._paginationManager.index+1)*this._paginationManager.amountPerPage),!t||t.length<1?(this._listElement.insertAdjacentElement("beforeend",this._emptyListTemplate()),!1):(this._listElement.removeAllChildren(),t.forEach((t=>{const e=this._listItemTemplate(t);e.classList.add("pagination-list-item"),this._listElement.insertAdjacentElement("beforeend",e)})),this._paginationManager.currentPageData=t,!0)}renderFooter(){(this._footerElement||document.getElementById(this.getFooterId()))&&document.getElementById(this.getFooterId())?.remove();const t=document.createElement("div");t.id=this.getFooterId();const e=document.createElement("button"),n=document.createElement("button");return e.setAttribute("type","button"),n.setAttribute("type","button"),[e.innerText,n.innerText]=[this._footerOptions?.prevButtonText||"Previous",this._footerOptions?.nextButtonText||"Next"],e.classList.add("btn-pagination","btn-pagination-prev"),n.classList.add("btn-pagination","btn-pagination-next"),[e.onclick,n.onclick]=[()=>this._paginationManager.previous(),()=>this._paginationManager.next()],t.insertAdjacentElement("beforeend",e),this.makeFooterButtonList(t),t.insertAdjacentElement("beforeend",n),t}makeFooterButtonList(t){const e=document.createElement("div");e.classList.add("btn-pagination-inner-list"),t.insertAdjacentElement("beforeend",e),this._footerOptions?.truncateLength&&this._footerOptions?.truncateLength>0?[...Array(this._paginationManager.numPages).keys()].truncate(this._paginationManager.index,this._footerOptions.truncateLength,-1,this._footerOptions.truncateOptions).forEach((t=>e.insertAdjacentElement("beforeend",this.makeFooterButton(t)))):[...Array(this._paginationManager.numPages).keys()].forEach((t=>e.insertAdjacentElement("beforeend",this.makeFooterButton(t))))}makeFooterButton(t){const e=document.createElement("button");return e.id=this.getButtonId(t),e.classList.add("btn-pagination"),e.setAttribute("type","button"),t===this._paginationManager.index&&e.classList.add("active"),this._footerOptions?.buttonClassList&&e.classList.add(...this._footerOptions.buttonClassList.split(" ")),this._footerOptions?.truncateLength&&this._footerOptions?.truncateLength>0&&-1===t?e.classList.add("btn-pagination-decorator"):e.onclick=()=>this._paginationManager.peek(t),this._footerOptions?.buttonTextFormula?e.innerText=this._footerOptions.buttonTextFormula(t):e.innerText=-1!==t?`${t+1}`:this._footerOptions?.truncateDecorator||"...",e}}},936:()=>{String.prototype.isNullOrEmpty=function(){return"string"!=typeof this&&!this&&""!==this},String.prototype.truncate=function(t,e="..."){return(this.length>t?this.substring(0,t)+e:this).toString()},String.prototype.removeAccents=function(){return this.normalize("NFD").replace(/[\u0300-\u036f]/g,"")},String.prototype.capitalizeFirstLetter=function(){return"string"!=typeof this?"":this.charAt(0).toUpperCase()+this.substring(1)},String.prototype.zeroBefore=function(){return this.padStart(2,"0")}}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,n),s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};(()=>{n.r(i),n.d(i,{Pagination:()=>r}),n(936),n(631),n(589);var t=n(19),e=n(858);class r{_index;_numPages;_currentPageData;_amountPerPage;_sourceArray;_sourceString;_pathToList;_pathToTotalResults;_onPageChange;_onFetchStart;_onFetchCompleted;_elementRender;_searchOptions;constructor(t){this._index=t.setup.currentPage-1,this._pathToList=t.setup.objectPathToList,this._pathToTotalResults=t.setup.objectPathToTotalResults,this._onPageChange=t.setup.onPageChange||(()=>{}),this._onFetchStart=t.setup.onFetchStart||(()=>{}),this._onFetchCompleted=t.setup.onFetchCompleted||(()=>{}),this._sourceString=r.isSourceString(t.setup.source)?t.setup.source:"",this._sourceArray=r.isSourceArray(t.setup.source)?t.setup.source:[],this._amountPerPage=t.setup.amountPerPage,this._numPages=this._amountPerPage>0?Math.ceil(this._sourceArray.length/this._amountPerPage):1,this._searchOptions=t?.searchOptions,this._elementRender=new e.PaginationRender(this,t),this.peek(this._index)}set currentPageData(t){this._currentPageData=t}get currentPageData(){return this._currentPageData}get sourceArray(){return this._sourceArray}get sourceString(){return this._sourceString}get index(){return this._index}get numPages(){return this._numPages}get amountPerPage(){return this._amountPerPage}async next(){await this.peek(this._index+1)}async previous(){await this.peek(this._index-1)}async peek(e){const n=this._index>0?this._index:0;e=t.clamp(e,0,e),this._index=this._sourceString?e:t.clamp(e,0,this._numPages-1),this._sourceString&&!await this._elementRender.tryRenderCurrentPageList()?this._index=n:this._sourceArray&&await this._elementRender.tryRenderCurrentPageList(),this._onPageChange(this._index),document.querySelectorAll(".btn-pagination.active").forEach((t=>t.classList.remove("active"))),document.getElementById(this._elementRender.getButtonId(this._index))?.classList.add("active"),this._elementRender.resetFooter()}async fetchCurrentPage(){if(!this._sourceString)return new Array;this._onFetchStart();let t=await fetch(this._sourceString,{method:this._searchOptions?.method||"POST",headers:this._searchOptions?.headers||{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({...this._searchOptions?.parameters,...this.getSearchArguments()})}).then((t=>t.json())),e=-1;if(this._pathToTotalResults){const n=this._pathToTotalResults.split(".");let i=t;n.forEach((t=>i="string"==typeof i[t]?JSON.parse(i[t]):i[t])),"number"==typeof i&&(e=i,this._numPages=this._amountPerPage>0?Math.ceil(e/this._amountPerPage):1,this._elementRender.resetFooter())}return this._pathToList?(this._pathToList.split(".").forEach((e=>t="string"==typeof t[e]?JSON.parse(t[e]):t[e])),this._onFetchCompleted(t,e),t):(this._onFetchCompleted&&this._onFetchCompleted(t,e),t)}getSearchArguments(){return{page:this._index+1,amount:this._amountPerPage}}static isSourceString(t){return"string"==typeof t}static isSourceArray(t){return!r.isSourceString(t)}}})(),Pagination=i})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aUJBQXhCRCxJQUNWRixFQUFnQkUsRUFDaEJoTSxLQUFLd0osVUFBWXhKLEtBQUswSixlQUFpQixFQUFJOUosS0FBS2lMLEtBQU1pQixFQUFnQjlMLEtBQUswSixnQkFBbUIsRUFDOUYxSixLQUFLa0ssZUFBZWxGLGMsQ0FLeEIsT0FBS2hGLEtBQUs2SixhQUNVN0osS0FBSzZKLFlBQVlyRixNQUFPLEtBQ2hDZ0IsU0FBU3lHLEdBQ2ZkLEVBRDJDLGlCQUFoQkEsRUFBU2MsR0FDekJULEtBQUtVLE1BQU9mLEVBQVNjLElBQ3JCZCxFQUFTYyxLQUV4QmpNLEtBQUtpSyxrQkFBbUJrQixFQUFVVyxHQUUzQlgsSUFHSm5MLEtBQUtpSyxtQkFDUmpLLEtBQUtpSyxrQkFBbUJrQixFQUFVVyxHQUc3QlgsRUFDVCxDQUVBLGtCQUFBUSxHQUNFLE1BQU8sQ0FDTFEsS0FBTW5NLEtBQUt1SixPQUFTLEVBQ3BCNkMsT0FBUXBNLEtBQUswSixlQUVqQixDQUVBLHFCQUFPZ0IsQ0FBZ0JDLEdBQ3JCLE1BQXlCLGlCQUFYQSxDQUNoQixDQUVBLG9CQUFPQyxDQUFlRCxHQUNwQixPQUFRckIsRUFBV29CLGVBQWdCQyxFQUNyQyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vQXJyYXlFeHRlbnNpb25zLnRzIiwid2VicGFjazovLy8uL0RPTUV4dGVuc2lvbnMudHMiLCJ3ZWJwYWNrOi8vLy4vTWF0aFRvb2xzLnRzIiwid2VicGFjazovLy8uL1BhZ2luYXRpb25SZW5kZXIudHMiLCJ3ZWJwYWNrOi8vLy4vU3RyaW5nRXh0ZW5zaW9ucy50cyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vLy4vUGFnaW5hdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcclxuZnVuY3Rpb24gY2xhbXAoIG51bTogbnVtYmVyID0gMCwgbWluOiBudW1iZXIgPSAwLCBtYXg6IG51bWJlciA9IDEwMCApOiBudW1iZXIge1xyXG4gIHJldHVybiBNYXRoLm1heCggbWluLCBNYXRoLm1pbiggbnVtLCBtYXggKSApO1xyXG59XHJcblxyXG50eXBlIFRydW5jYXRlT3B0aW9ucyA9IHtcclxuICB0cnVuY2F0ZUxlZnRTdGFydD86IG51bWJlcjtcclxuICB0cnVuY2F0ZVJpZ2h0U3RhcnQ/OiBudW1iZXI7XHJcbiAgdHJ1bmNhdGVMZWZ0PzogYm9vbGVhbjtcclxuICB0cnVuY2F0ZVJpZ2h0PzogYm9vbGVhbjtcclxufVxyXG5cclxuaW50ZXJmYWNlIEFycmF5PFQ+IHtcclxuICBqb2luQXNTdHJpbmcoKTogc3RyaW5nO1xyXG4gIHRydW5jYXRlKCBpbmRleDogbnVtYmVyLCBsZW5ndGg6IG51bWJlciwgZGVjb3JhdG9yPzogVCwgdHJ1bmNhdGVPcHRpb25zPzogVHJ1bmNhdGVPcHRpb25zICk6IEFycmF5PFQ+O1xyXG4gIGdldFRvdGFsKCk6IG51bWJlcjtcclxufVxyXG5cclxuQXJyYXkucHJvdG90eXBlLmpvaW5Bc1N0cmluZyA9IGZ1bmN0aW9uICgpOiBzdHJpbmcge1xyXG4gIHJldHVybiB0aGlzLnJlZHVjZSggKCBhY2MsIG5leHQgKSA9PiBhY2MgPyBgJHsgYWNjIH0sICR7IG5leHQgfWAgOiBgJHsgbmV4dCB9YCwgJycgKTtcclxufTtcclxuXHJcbkFycmF5LnByb3RvdHlwZS5nZXRUb3RhbCA9IGZ1bmN0aW9uICgpIHtcclxuICByZXR1cm4gdGhpcy5yZWR1Y2UoICggYWNjLCBuZXh0ICkgPT4gYWNjID8gYWNjICsgbmV4dCA6IG5leHQsIDAgKVxyXG59XHJcblxyXG5BcnJheS5wcm90b3R5cGUudHJ1bmNhdGUgPSBmdW5jdGlvbiA8VD4oIHRoaXM6IFRbXSwgaW5kZXg6IG51bWJlciwgbGVuZ3RoOiBudW1iZXIsIGRlY29yYXRvcj86IFQsIHRydW5jYXRlT3B0aW9ucz86IFRydW5jYXRlT3B0aW9ucyApOiBBcnJheTxUPiB7XHJcbiAgaWYgKCB0aGlzLmxlbmd0aCA8PSBsZW5ndGggKSB7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIGNvbnN0IG5vdFRydW5jYXRlTGVmdCA9IHRydW5jYXRlT3B0aW9ucyAmJiB0cnVuY2F0ZU9wdGlvbnMudHJ1bmNhdGVMZWZ0ICE9PSB1bmRlZmluZWQgPyAhdHJ1bmNhdGVPcHRpb25zLnRydW5jYXRlTGVmdCA6IGZhbHNlO1xyXG4gIGNvbnN0IHRydW5jYXRlTGVmdE5vdFN0YXJ0ZWQgPSB0cnVuY2F0ZU9wdGlvbnMgJiYgdHJ1bmNhdGVPcHRpb25zLnRydW5jYXRlTGVmdFN0YXJ0ICYmIGluZGV4IDwgdHJ1bmNhdGVPcHRpb25zLnRydW5jYXRlTGVmdFN0YXJ0O1xyXG4gIGNvbnN0IGZpcnN0VmFsdWVJbm5lckFycmF5ID0gbm90VHJ1bmNhdGVMZWZ0IHx8IHRydW5jYXRlTGVmdE5vdFN0YXJ0ZWQgPyAwIDogaW5kZXggLSBsZW5ndGggLyAyO1xyXG4gIGNvbnN0IGZpcnN0VmFsdWVJbm5lckFycmF5Q2xhbXBlZCA9IGNsYW1wKCBmaXJzdFZhbHVlSW5uZXJBcnJheSwgMCwgaW5kZXggLSAxICk7XHJcbiAgY29uc3QgaW5uZXJBcnJheVRhaWwgPSB0aGlzLnNsaWNlKCBmaXJzdFZhbHVlSW5uZXJBcnJheUNsYW1wZWQsIGluZGV4ICk7XHJcblxyXG4gIGNvbnN0IGxlZnRBcnJheSA9IFtdO1xyXG4gIGNvbnN0IGxlbmd0aFN0YXJ0RGVjb3JhdG9yQ29uc3RyYWludCA9IGxlbmd0aCAlIDIgPT0gMCA/IDAgOiAxO1xyXG4gIGlmICggZmlyc3RWYWx1ZUlubmVyQXJyYXlDbGFtcGVkID4gbGVuZ3RoU3RhcnREZWNvcmF0b3JDb25zdHJhaW50ICYmIGRlY29yYXRvciApIHtcclxuICAgIGxlZnRBcnJheS5wdXNoKCB0aGlzWzBdLCBkZWNvcmF0b3IgKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IG5vdFRydW5jYXRlUmlnaHQgPSB0cnVuY2F0ZU9wdGlvbnMgJiYgdHJ1bmNhdGVPcHRpb25zLnRydW5jYXRlUmlnaHQgIT09IHVuZGVmaW5lZCA/ICF0cnVuY2F0ZU9wdGlvbnMudHJ1bmNhdGVSaWdodCA6IGZhbHNlO1xyXG4gIGNvbnN0IHRydW5jYXRlUmlnaHROb3RTdGFydGVkID0gdHJ1bmNhdGVPcHRpb25zICYmIHRydW5jYXRlT3B0aW9ucy50cnVuY2F0ZVJpZ2h0U3RhcnQgJiYgaW5kZXggPCB0cnVuY2F0ZU9wdGlvbnMudHJ1bmNhdGVSaWdodFN0YXJ0O1xyXG4gIGNvbnN0IGxhc3RWYWx1ZUlubmVyQXJyYXkgPSBub3RUcnVuY2F0ZVJpZ2h0IHx8IHRydW5jYXRlUmlnaHROb3RTdGFydGVkID8gdGhpcy5sZW5ndGggOiBpbmRleCArIDEgKyBsZW5ndGggLyAyO1xyXG4gIGNvbnN0IGxhc3RWYWx1ZUlubmVyQXJyYXlDbGFtcGVkID0gY2xhbXAoIGxhc3RWYWx1ZUlubmVyQXJyYXksIGluZGV4LCB0aGlzLmxlbmd0aCApO1xyXG4gIGNvbnN0IGlubmVyQXJyYXlIZWFkID0gdGhpcy5zbGljZSggaW5kZXgsIGxhc3RWYWx1ZUlubmVyQXJyYXlDbGFtcGVkICk7XHJcblxyXG4gIGxldCByaWdodEFycmF5ID0gW3RoaXNbdGhpcy5sZW5ndGggLSAxXV07XHJcbiAgaWYgKCBsYXN0VmFsdWVJbm5lckFycmF5Q2xhbXBlZCA8IHRoaXMubGVuZ3RoICYmIGRlY29yYXRvciApIHtcclxuICAgIHJpZ2h0QXJyYXkudW5zaGlmdCggZGVjb3JhdG9yICk7XHJcbiAgfVxyXG5cclxuICBpZiAoIHRoaXMubGVuZ3RoIC0gbGFzdFZhbHVlSW5uZXJBcnJheUNsYW1wZWQgPT09IDEgKSB7XHJcbiAgICByaWdodEFycmF5LnNoaWZ0KCk7XHJcbiAgfSBlbHNlIGlmICggdGhpcy5sZW5ndGggLSBsYXN0VmFsdWVJbm5lckFycmF5Q2xhbXBlZCA9PT0gMCApIHtcclxuICAgIHJpZ2h0QXJyYXkgPSBbXTtcclxuICB9XHJcblxyXG4gIHJldHVybiBbLi4ubGVmdEFycmF5LCAuLi5pbm5lckFycmF5VGFpbCwgLi4uaW5uZXJBcnJheUhlYWQsIC4uLnJpZ2h0QXJyYXldO1xyXG59XHJcbiIsImludGVyZmFjZSBIVE1MRWxlbWVudCB7XHJcbiAgcmVtb3ZlQWxsQ2hpbGRyZW4oKTogdm9pZDtcclxuICBtYWtlQ292ZXIoKTogdm9pZDtcclxufVxyXG5cclxuSFRNTEVsZW1lbnQucHJvdG90eXBlLnJlbW92ZUFsbENoaWxkcmVuID0gZnVuY3Rpb24gKCkge1xyXG4gIHdoaWxlICggdGhpcy5oYXNDaGlsZE5vZGVzKCkgKSB7XHJcbiAgICBpZiAoIHRoaXMuZmlyc3RDaGlsZCApIHtcclxuICAgICAgdGhpcy5yZW1vdmVDaGlsZCggdGhpcy5maXJzdENoaWxkICk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5IVE1MRWxlbWVudC5wcm90b3R5cGUubWFrZUNvdmVyID0gZnVuY3Rpb24gKCkge1xyXG4gIHRoaXMuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICB0aGlzLnN0eWxlLndpZHRoID0gJzEwMCUnO1xyXG4gIHRoaXMuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xyXG4gIHRoaXMuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xyXG4gIHRoaXMuc3R5bGUudG9wID0gJzAnO1xyXG4gIHRoaXMuc3R5bGUubGVmdCA9ICcwJztcclxufVxyXG4iLCJleHBvcnQgY29uc3QgcmVnZXhOdW1iZXJQYXR0ZXJuID0gLy0/XFxkK1xcLj9cXGQqL2c7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFBvaW50MkQge1xyXG4gIHg6IG51bWJlcjtcclxuICB5OiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRGltZW5zaW9ucyB7XHJcbiAgd2lkdGg6IG51bWJlcjtcclxuICBoZWlnaHQ6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGluZGV4VG9Sb3coIGluZGV4OiBudW1iZXIsIGdyaWRXaWR0aDogbnVtYmVyICkge1xyXG4gIHJldHVybiBNYXRoLmZsb29yKCBpbmRleCAvIGdyaWRXaWR0aCApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW5kZXhUb0NvbCggaW5kZXg6IG51bWJlciwgZ3JpZFdpZHRoOiBudW1iZXIgKSB7XHJcbiAgcmV0dXJuIGluZGV4ICUgZ3JpZFdpZHRoO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcm93Q29sVG9JbmRleCggcm93OiBudW1iZXIsIGNvbDogbnVtYmVyLCB3aWR0aDogbnVtYmVyICkge1xyXG4gIHJldHVybiAoIHJvdyAqIHdpZHRoICkgKyBjb2w7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbGVycCggbWluOiBudW1iZXIsIG1heDogbnVtYmVyLCBhbW91bnQ6IG51bWJlciApOiBudW1iZXIge1xyXG4gIHJldHVybiAoIDEgLSBhbW91bnQgKSAqIG1pbiArIGFtb3VudCAqIG1heDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGludmVyc2VMZXJwKCBhOiBudW1iZXIsIGI6IG51bWJlciwgdmFsOiBudW1iZXIgKTogbnVtYmVyIHtcclxuICByZXR1cm4gKCB2YWwgLSBhICkgLyAoIGIgLSBhICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1hcCggaW5NaW46IG51bWJlciwgaW5NYXg6IG51bWJlciwgb3V0TWluOiBudW1iZXIsIG91dE1heDogbnVtYmVyLCB2YWw6IG51bWJlciApOiBudW1iZXIge1xyXG4gIHJldHVybiBsZXJwKCBvdXRNaW4sIG91dE1heCwgaW52ZXJzZUxlcnAoIGluTWluLCBpbk1heCwgdmFsICkgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFJhbmRvbUludEV4Y2x1c2l2ZSggbWluOiBudW1iZXIsIG1heDogbnVtYmVyICkge1xyXG4gIHJldHVybiBNYXRoLmZsb29yKCBNYXRoLnJhbmRvbSgpICogKCBtYXggLSBtaW4gKSArIG1pbiApO1xyXG59XHJcblxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRSYW5kb21JbnRJbmNsdXNpdmUoIG1pbjogbnVtYmVyLCBtYXg6IG51bWJlciApIHtcclxuICBtaW4gPSBNYXRoLmNlaWwoIG1pbiApO1xyXG4gIG1heCA9IE1hdGguZmxvb3IoIG1heCApO1xyXG4gIHJldHVybiBNYXRoLmZsb29yKCBNYXRoLnJhbmRvbSgpICogKCBtYXggLSBtaW4gKyAxICkgKSArIG1pbjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFJhbmRvbUZyb21BcnJheTxUPiggYXJyOiBBcnJheTxUPiApIHtcclxuICByZXR1cm4gYXJyW2dldFJhbmRvbUludEV4Y2x1c2l2ZSggMCwgYXJyLmxlbmd0aCApXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNsYW1wKCBudW06IG51bWJlciA9IDAsIG1pbjogbnVtYmVyID0gMCwgbWF4OiBudW1iZXIgPSAxMDAgKTogbnVtYmVyIHtcclxuICByZXR1cm4gTWF0aC5tYXgoIG1pbiwgTWF0aC5taW4oIG51bSwgbWF4ICkgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1pbnV0ZXNUb01pbGxpc2Vjb25kcyggbXM6IG51bWJlciApIHtcclxuICByZXR1cm4gbXMgKiA2MDAwMDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1pbGxpc2Vjb25kc1RvTWludXRlcyggbXM6IG51bWJlciApIHtcclxuICByZXR1cm4gbXMgLyA2MDAwMDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1pbGxpc2Vjb25kc1RvSG91cnMoIG1zOiBudW1iZXIgKSB7XHJcbiAgcmV0dXJuIG1zIC8gMy42ZSs2O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWlsbGlzZWNvbmRzVG9EYXlzKCBtczogbnVtYmVyICkge1xyXG4gIHJldHVybiBtcyAvIDguNjRlKzc7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtZWdhYnl0ZVRvQnl0ZSggbWI6IG51bWJlciApIHtcclxuICByZXR1cm4gbWIgKiAxMDI0ICogMTAyNDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGJ5dGVUb01lZ2FieXRlKCBiOiBudW1iZXIgKSB7XHJcbiAgcmV0dXJuIGIgLyAxMDI0IC8gMTAyNDtcclxufSIsImltcG9ydCB7IFBhZ2luYXRpb24gfSBmcm9tICcuL1BhZ2luYXRpb24nO1xyXG5pbXBvcnQgeyBJUGFnaW5hdGlvbkNvbnRhaW5lck9wdGlvbnMsIElQYWdpbmF0aW9uRm9vdGVyT3B0aW9ucywgSVBhZ2luYXRpb25IZWFkZXJPcHRpb25zLCBJUGFnaW5hdGlvbk1hbmRhdG9yeU9wdGlvbnMgfSBmcm9tICcuL1BhZ2luYXRpb25UeXBlcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgUGFnaW5hdGlvblJlbmRlciB7XHJcbiAgcHJpdmF0ZSBfcGFnaW5hdGlvbk1hbmFnZXI6IFBhZ2luYXRpb247XHJcbiAgcHJpdmF0ZSBfY29udGFpbmVyRWxlbWVudDogSFRNTERpdkVsZW1lbnQ7XHJcbiAgcHJpdmF0ZSBfbGlzdEVsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG4gIHByaXZhdGUgX2Zvb3RlckVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50O1xyXG4gIHByaXZhdGUgX2xpc3RJdGVtVGVtcGxhdGU6ICggYXJnczogb2JqZWN0ICkgPT4gSFRNTExJRWxlbWVudDtcclxuICBwcml2YXRlIF9lbXB0eUxpc3RUZW1wbGF0ZTogKCkgPT4gSFRNTEVsZW1lbnQ7XHJcbiAgcHJpdmF0ZSBfaGVhZGVyT3B0aW9ucz86IElQYWdpbmF0aW9uSGVhZGVyT3B0aW9ucztcclxuICBwcml2YXRlIF9jb250YWluZXJPcHRpb25zPzogSVBhZ2luYXRpb25Db250YWluZXJPcHRpb25zO1xyXG4gIHByaXZhdGUgX2Zvb3Rlck9wdGlvbnM/OiBJUGFnaW5hdGlvbkZvb3Rlck9wdGlvbnM7XHJcbiAgcHJpdmF0ZSBfbGlzdENvbnRhaW5lclRhZz86IHN0cmluZztcclxuXHJcbiAgY29uc3RydWN0b3IoIHBhZ2luYXRpb25PYmplY3Q6IFBhZ2luYXRpb24sIG9wdGlvbnM6IHtcclxuICAgIHNldHVwOiBJUGFnaW5hdGlvbk1hbmRhdG9yeU9wdGlvbnMsXHJcbiAgICBoZWFkZXJPcHRpb25zPzogSVBhZ2luYXRpb25IZWFkZXJPcHRpb25zLFxyXG4gICAgY29udGFpbmVyT3B0aW9ucz86IElQYWdpbmF0aW9uQ29udGFpbmVyT3B0aW9ucyxcclxuICAgIGZvb3Rlck9wdGlvbnM/OiBJUGFnaW5hdGlvbkZvb3Rlck9wdGlvbnNcclxuICB9ICkge1xyXG4gICAgdGhpcy5fcGFnaW5hdGlvbk1hbmFnZXIgPSBwYWdpbmF0aW9uT2JqZWN0O1xyXG5cclxuICAgIFt0aGlzLl9oZWFkZXJPcHRpb25zLCB0aGlzLl9jb250YWluZXJPcHRpb25zLCB0aGlzLl9mb290ZXJPcHRpb25zXSA9IFtvcHRpb25zPy5oZWFkZXJPcHRpb25zLCBvcHRpb25zPy5jb250YWluZXJPcHRpb25zLCBvcHRpb25zPy5mb290ZXJPcHRpb25zXVxyXG4gICAgdGhpcy5fbGlzdEl0ZW1UZW1wbGF0ZSA9IG9wdGlvbnMuc2V0dXAubGlzdEl0ZW1UZW1wbGF0ZTtcclxuICAgIHRoaXMuX2VtcHR5TGlzdFRlbXBsYXRlID0gb3B0aW9ucy5zZXR1cC5lbXB0eUxpc3RUZW1wbGF0ZTtcclxuICAgIHRoaXMuX2xpc3RDb250YWluZXJUYWcgPSBvcHRpb25zLnNldHVwLmxpc3RDb250YWluZXJUYWcgfHwgJ3VsJztcclxuXHJcbiAgICB0aGlzLl9jb250YWluZXJFbGVtZW50ID0gKCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCBvcHRpb25zLnNldHVwLmNvbnRhaW5lclF1ZXJ5U2VsZWN0b3IgKSB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnZGl2JyApICkgYXMgSFRNTERpdkVsZW1lbnQ7XHJcblxyXG4gICAgdGhpcy5fZm9vdGVyRWxlbWVudCA9IHRoaXMucmVuZGVyRm9vdGVyKCk7XHJcbiAgICB0aGlzLl9jb250YWluZXJFbGVtZW50Lmluc2VydEFkamFjZW50RWxlbWVudCggJ2JlZm9yZWVuZCcsIHRoaXMuX2Zvb3RlckVsZW1lbnQgKTtcclxuXHJcbiAgICB0aGlzLl9saXN0RWxlbWVudCA9IHRoaXMucmVuZGVyTGlzdEVsZW1lbnQoKTtcclxuICAgIHRoaXMuX2NvbnRhaW5lckVsZW1lbnQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCAnYWZ0ZXJiZWdpbicsIHRoaXMuX2xpc3RFbGVtZW50ICk7XHJcblxyXG5cclxuICAgIGlmICggdGhpcy5fY29udGFpbmVyT3B0aW9ucz8uY2xhc3NMaXN0ICkge1xyXG4gICAgICB0aGlzLl9jb250YWluZXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoIC4uLnRoaXMuX2NvbnRhaW5lck9wdGlvbnMuY2xhc3NMaXN0LnNwbGl0KCAnICcgKSApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0QnV0dG9uSWQoIGluZGV4OiBudW1iZXIgKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBgYnRuUGFnaW5hdGlvbiR7IHRoaXMuX2NvbnRhaW5lckVsZW1lbnQuaWQuY2FwaXRhbGl6ZUZpcnN0TGV0dGVyKCkgfSR7IGluZGV4ICsgMSB9YDtcclxuICB9XHJcblxyXG5cclxuICBnZXRJdGVtTGlzdElkKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gYGxpc3RQYWdpbmF0aW9uJHsgdGhpcy5fY29udGFpbmVyRWxlbWVudC5pZC5jYXBpdGFsaXplRmlyc3RMZXR0ZXIoKSB9YDtcclxuICB9XHJcblxyXG4gIGdldEZvb3RlcklkKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gYGZvb3RlclBhZ2luYXRpb24keyB0aGlzLl9jb250YWluZXJFbGVtZW50LmlkLmNhcGl0YWxpemVGaXJzdExldHRlcigpIH1gO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyTGlzdEVsZW1lbnQoKTogSFRNTEVsZW1lbnQge1xyXG4gICAgaWYgKCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggdGhpcy5nZXRJdGVtTGlzdElkKCkgKSApIHtcclxuICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCB0aGlzLmdldEl0ZW1MaXN0SWQoKSApIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGxpc3RFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggdGhpcy5fbGlzdENvbnRhaW5lclRhZyEgKTtcclxuICAgIGxpc3RFbGVtZW50LmlkID0gdGhpcy5nZXRJdGVtTGlzdElkKCk7XHJcbiAgICByZXR1cm4gbGlzdEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICByZXNldEZvb3RlcigpIHtcclxuICAgIHRoaXMuX2Zvb3RlckVsZW1lbnQgPSB0aGlzLnJlbmRlckZvb3RlcigpO1xyXG4gICAgaWYgKCB0aGlzLl9wYWdpbmF0aW9uTWFuYWdlci5zb3VyY2VTdHJpbmcgKSB7XHJcbiAgICAgIHRoaXMuX2Zvb3RlckVsZW1lbnQuaW5zZXJ0QWRqYWNlbnRIVE1MKCAnYmVmb3JlZW5kJywgYFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWRvci1mb290ZXItZmV0Y2hcIj5cclxuICAgICAgICAgIDxzcGFuPlDDoWdpbmE6ICR7IHRoaXMuX3BhZ2luYXRpb25NYW5hZ2VyLmluZGV4ICsgMSB9PC9zcGFuPlxyXG4gICAgICAgICAgPHNwYW4+TsK6IGRlIFJlc3VsdGFkb3M6ICR7IHRoaXMuX3BhZ2luYXRpb25NYW5hZ2VyLmN1cnJlbnRQYWdlRGF0YSA/IHRoaXMuX3BhZ2luYXRpb25NYW5hZ2VyLmN1cnJlbnRQYWdlRGF0YS5sZW5ndGggOiAwIH08L3NwYW4+XHJcbiAgICAgICAgPC9kaXY+YCApO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2NvbnRhaW5lckVsZW1lbnQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCAnYmVmb3JlZW5kJywgdGhpcy5fZm9vdGVyRWxlbWVudCApO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgdHJ5UmVuZGVyQ3VycmVudFBhZ2VMaXN0KCkge1xyXG4gICAgbGV0IGN1cnJlbnRQYWdlRGF0YTtcclxuXHJcbiAgICBpZiAoIHRoaXMuX3BhZ2luYXRpb25NYW5hZ2VyLnNvdXJjZVN0cmluZyApIHtcclxuICAgICAgY3VycmVudFBhZ2VEYXRhID0gYXdhaXQgdGhpcy5fcGFnaW5hdGlvbk1hbmFnZXIuZmV0Y2hDdXJyZW50UGFnZSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY3VycmVudFBhZ2VEYXRhID0gdGhpcy5fcGFnaW5hdGlvbk1hbmFnZXIuc291cmNlQXJyYXkuc2xpY2UoIHRoaXMuX3BhZ2luYXRpb25NYW5hZ2VyLmluZGV4ICogdGhpcy5fcGFnaW5hdGlvbk1hbmFnZXIuYW1vdW50UGVyUGFnZSwgKCB0aGlzLl9wYWdpbmF0aW9uTWFuYWdlci5pbmRleCArIDEgKSAqIHRoaXMuX3BhZ2luYXRpb25NYW5hZ2VyLmFtb3VudFBlclBhZ2UgKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoICFjdXJyZW50UGFnZURhdGEgfHwgY3VycmVudFBhZ2VEYXRhLmxlbmd0aCA8IDEgKSB7XHJcbiAgICAgIHRoaXMuX2xpc3RFbGVtZW50Lmluc2VydEFkamFjZW50RWxlbWVudCggJ2JlZm9yZWVuZCcsIHRoaXMuX2VtcHR5TGlzdFRlbXBsYXRlKCkgKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2xpc3RFbGVtZW50LnJlbW92ZUFsbENoaWxkcmVuKCk7XHJcblxyXG4gICAgY3VycmVudFBhZ2VEYXRhLmZvckVhY2goICggZWxlbWVudDogYW55ICkgPT4ge1xyXG4gICAgICBjb25zdCBsaUVsZW1lbnQgPSB0aGlzLl9saXN0SXRlbVRlbXBsYXRlKCBlbGVtZW50ICk7XHJcbiAgICAgIGxpRWxlbWVudC5jbGFzc0xpc3QuYWRkKCAncGFnaW5hdGlvbi1saXN0LWl0ZW0nICk7XHJcbiAgICAgIHRoaXMuX2xpc3RFbGVtZW50Lmluc2VydEFkamFjZW50RWxlbWVudCggJ2JlZm9yZWVuZCcsIGxpRWxlbWVudCApO1xyXG4gICAgfSApO1xyXG5cclxuICAgIHRoaXMuX3BhZ2luYXRpb25NYW5hZ2VyLmN1cnJlbnRQYWdlRGF0YSA9IGN1cnJlbnRQYWdlRGF0YTtcclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIHJlbmRlckZvb3RlcigpIHtcclxuICAgIGlmICggdGhpcy5fZm9vdGVyRWxlbWVudCB8fCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggdGhpcy5nZXRGb290ZXJJZCgpICkgKSB7XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCB0aGlzLmdldEZvb3RlcklkKCkgKT8ucmVtb3ZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZm9vdGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicgKTtcclxuICAgIGZvb3Rlci5pZCA9IHRoaXMuZ2V0Rm9vdGVySWQoKTtcclxuXHJcbiAgICBjb25zdCBidG5QcmV2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2J1dHRvbicgKTtcclxuICAgIGNvbnN0IGJ0bk5leHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnYnV0dG9uJyApO1xyXG4gICAgYnRuUHJldi5zZXRBdHRyaWJ1dGUoICd0eXBlJywgJ2J1dHRvbicgKTtcclxuICAgIGJ0bk5leHQuc2V0QXR0cmlidXRlKCAndHlwZScsICdidXR0b24nICk7XHJcblxyXG4gICAgW2J0blByZXYuaW5uZXJUZXh0LCBidG5OZXh0LmlubmVyVGV4dF0gPSBbdGhpcy5fZm9vdGVyT3B0aW9ucz8ucHJldkJ1dHRvblRleHQgfHwgJ1ByZXZpb3VzJywgdGhpcy5fZm9vdGVyT3B0aW9ucz8ubmV4dEJ1dHRvblRleHQgfHwgJ05leHQnXTtcclxuICAgIGJ0blByZXYuY2xhc3NMaXN0LmFkZCggJ2J0bi1wYWdpbmF0aW9uJywgJ2J0bi1wYWdpbmF0aW9uLXByZXYnICk7XHJcbiAgICBidG5OZXh0LmNsYXNzTGlzdC5hZGQoICdidG4tcGFnaW5hdGlvbicsICdidG4tcGFnaW5hdGlvbi1uZXh0JyApO1xyXG4gICAgW2J0blByZXYub25jbGljaywgYnRuTmV4dC5vbmNsaWNrXSA9IFsoKSA9PiB0aGlzLl9wYWdpbmF0aW9uTWFuYWdlci5wcmV2aW91cygpLCAoKSA9PiB0aGlzLl9wYWdpbmF0aW9uTWFuYWdlci5uZXh0KCldO1xyXG5cclxuICAgIGZvb3Rlci5pbnNlcnRBZGphY2VudEVsZW1lbnQoICdiZWZvcmVlbmQnLCBidG5QcmV2ICk7XHJcblxyXG4gICAgdGhpcy5tYWtlRm9vdGVyQnV0dG9uTGlzdCggZm9vdGVyICk7XHJcblxyXG4gICAgZm9vdGVyLmluc2VydEFkamFjZW50RWxlbWVudCggJ2JlZm9yZWVuZCcsIGJ0bk5leHQgKTtcclxuXHJcbiAgICByZXR1cm4gZm9vdGVyO1xyXG4gIH1cclxuXHJcblxyXG4gIHByaXZhdGUgbWFrZUZvb3RlckJ1dHRvbkxpc3QoIGZvb3RlcjogSFRNTERpdkVsZW1lbnQgKSB7XHJcbiAgICBjb25zdCBidXR0b25Jbm5lckxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnZGl2JyApO1xyXG4gICAgYnV0dG9uSW5uZXJMaXN0LmNsYXNzTGlzdC5hZGQoICdidG4tcGFnaW5hdGlvbi1pbm5lci1saXN0JyApO1xyXG4gICAgZm9vdGVyLmluc2VydEFkamFjZW50RWxlbWVudCggJ2JlZm9yZWVuZCcsIGJ1dHRvbklubmVyTGlzdCApXHJcblxyXG4gICAgaWYgKCB0aGlzLl9mb290ZXJPcHRpb25zPy50cnVuY2F0ZUxlbmd0aCAmJiB0aGlzLl9mb290ZXJPcHRpb25zPy50cnVuY2F0ZUxlbmd0aCA+IDAgKSB7XHJcbiAgICAgIFsuLi5BcnJheSggdGhpcy5fcGFnaW5hdGlvbk1hbmFnZXIubnVtUGFnZXMgKS5rZXlzKCldXHJcbiAgICAgICAgLnRydW5jYXRlKCB0aGlzLl9wYWdpbmF0aW9uTWFuYWdlci5pbmRleCwgdGhpcy5fZm9vdGVyT3B0aW9ucy50cnVuY2F0ZUxlbmd0aCwgLTEsIHRoaXMuX2Zvb3Rlck9wdGlvbnMudHJ1bmNhdGVPcHRpb25zIClcclxuICAgICAgICAuZm9yRWFjaCggaW5kZXggPT4gYnV0dG9uSW5uZXJMaXN0Lmluc2VydEFkamFjZW50RWxlbWVudCggJ2JlZm9yZWVuZCcsIHRoaXMubWFrZUZvb3RlckJ1dHRvbiggaW5kZXggKSApICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBbLi4uQXJyYXkoIHRoaXMuX3BhZ2luYXRpb25NYW5hZ2VyLm51bVBhZ2VzICkua2V5cygpXVxyXG4gICAgICAgIC5mb3JFYWNoKCBpbmRleCA9PiBidXR0b25Jbm5lckxpc3QuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCAnYmVmb3JlZW5kJywgdGhpcy5tYWtlRm9vdGVyQnV0dG9uKCBpbmRleCApICkgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgbWFrZUZvb3RlckJ1dHRvbiggaW5kZXg6IG51bWJlciApOiBIVE1MQnV0dG9uRWxlbWVudCB7XHJcbiAgICBjb25zdCBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnYnV0dG9uJyApO1xyXG4gICAgYnRuLmlkID0gdGhpcy5nZXRCdXR0b25JZCggaW5kZXggKTtcclxuICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCAnYnRuLXBhZ2luYXRpb24nICk7XHJcbiAgICBidG4uc2V0QXR0cmlidXRlKCAndHlwZScsICdidXR0b24nICk7XHJcbiAgICBpZiAoIGluZGV4ID09PSB0aGlzLl9wYWdpbmF0aW9uTWFuYWdlci5pbmRleCApIHtcclxuICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoICdhY3RpdmUnICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCB0aGlzLl9mb290ZXJPcHRpb25zPy5idXR0b25DbGFzc0xpc3QgKSB7XHJcbiAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCAuLi50aGlzLl9mb290ZXJPcHRpb25zLmJ1dHRvbkNsYXNzTGlzdC5zcGxpdCggJyAnICkgKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIHRoaXMuX2Zvb3Rlck9wdGlvbnM/LnRydW5jYXRlTGVuZ3RoICYmIHRoaXMuX2Zvb3Rlck9wdGlvbnM/LnRydW5jYXRlTGVuZ3RoID4gMCAmJiBpbmRleCA9PT0gLTEgKSB7XHJcbiAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCAnYnRuLXBhZ2luYXRpb24tZGVjb3JhdG9yJyApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLl9wYWdpbmF0aW9uTWFuYWdlci5wZWVrKCBpbmRleCApO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICggdGhpcy5fZm9vdGVyT3B0aW9ucz8uYnV0dG9uVGV4dEZvcm11bGEgKSB7XHJcbiAgICAgIGJ0bi5pbm5lclRleHQgPSB0aGlzLl9mb290ZXJPcHRpb25zLmJ1dHRvblRleHRGb3JtdWxhKCBpbmRleCApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYnRuLmlubmVyVGV4dCA9IGluZGV4ICE9PSAtMSA/IGAkeyBpbmRleCArIDEgfWAgOiB0aGlzLl9mb290ZXJPcHRpb25zPy50cnVuY2F0ZURlY29yYXRvciB8fCAnLi4uJztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYnRuO1xyXG4gIH1cclxuXHJcbn0iLCJcclxuaW50ZXJmYWNlIFN0cmluZyB7XHJcbiAgdHJ1bmNhdGUoIG1heDogbnVtYmVyLCBkZWNvcmF0b3I6IHN0cmluZyApOiBzdHJpbmc7XHJcbiAgcmVtb3ZlQWNjZW50cygpOiBzdHJpbmc7XHJcbiAgY2FwaXRhbGl6ZUZpcnN0TGV0dGVyKCk6IHN0cmluZztcclxuICB6ZXJvQmVmb3JlKCk6IHN0cmluZztcclxuICBpc051bGxPckVtcHR5KCk6IGJvb2xlYW47XHJcbn1cclxuXHJcblN0cmluZy5wcm90b3R5cGUuaXNOdWxsT3JFbXB0eSA9IGZ1bmN0aW9uICgpOiBib29sZWFuIHtcclxuICByZXR1cm4gdHlwZW9mIHRoaXMgIT09ICdzdHJpbmcnICYmICF0aGlzICYmIHRoaXMgIT09ICcnO1xyXG59O1xyXG5cclxuU3RyaW5nLnByb3RvdHlwZS50cnVuY2F0ZSA9IGZ1bmN0aW9uICggbWF4OiBudW1iZXIsIGRlY29yYXRvcjogc3RyaW5nID0gJy4uLicgKTogc3RyaW5nIHtcclxuICByZXR1cm4gKCB0aGlzLmxlbmd0aCA+IG1heCA/IHRoaXMuc3Vic3RyaW5nKCAwLCBtYXggKSArIGRlY29yYXRvciA6IHRoaXMgKS50b1N0cmluZygpO1xyXG59O1xyXG5cclxuU3RyaW5nLnByb3RvdHlwZS5yZW1vdmVBY2NlbnRzID0gZnVuY3Rpb24gKCkge1xyXG4gIHJldHVybiB0aGlzLm5vcm1hbGl6ZSggJ05GRCcgKS5yZXBsYWNlKCAvW1xcdTAzMDAtXFx1MDM2Zl0vZywgXCJcIiApO1xyXG59XHJcblxyXG5TdHJpbmcucHJvdG90eXBlLmNhcGl0YWxpemVGaXJzdExldHRlciA9IGZ1bmN0aW9uICgpOiBzdHJpbmcge1xyXG4gIGlmICggdHlwZW9mIHRoaXMgIT09ICdzdHJpbmcnICkge1xyXG4gICAgcmV0dXJuICcnO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHRoaXMuY2hhckF0KCAwICkudG9VcHBlckNhc2UoKSArIHRoaXMuc3Vic3RyaW5nKCAxICk7XHJcbn1cclxuXHJcblN0cmluZy5wcm90b3R5cGUuemVyb0JlZm9yZSA9IGZ1bmN0aW9uICgpIHtcclxuICByZXR1cm4gdGhpcy5wYWRTdGFydCggMiwgJzAnICk7XHJcbn0iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiaW1wb3J0ICcuL1N0cmluZ0V4dGVuc2lvbnMnO1xyXG5pbXBvcnQgJy4vRE9NRXh0ZW5zaW9ucyc7XHJcbmltcG9ydCAnLi9BcnJheUV4dGVuc2lvbnMnO1xyXG5pbXBvcnQgeyBJUGFnaW5hdGlvbkNvbnRhaW5lck9wdGlvbnMsIElQYWdpbmF0aW9uRm9vdGVyT3B0aW9ucywgSVBhZ2luYXRpb25IZWFkZXJPcHRpb25zLCBJUGFnaW5hdGlvbk1hbmRhdG9yeU9wdGlvbnMsIElQYWdpbmF0aW9uU2VhcmNoT3B0aW9ucyB9IGZyb20gJy4vUGFnaW5hdGlvblR5cGVzJztcclxuaW1wb3J0ICogYXMgTWF0aFRvb2xzIGZyb20gJy4vTWF0aFRvb2xzJztcclxuaW1wb3J0IHsgUGFnaW5hdGlvblJlbmRlciB9IGZyb20gJy4vUGFnaW5hdGlvblJlbmRlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgUGFnaW5hdGlvbiB7XHJcbiAgcHJpdmF0ZSBfaW5kZXg6IG51bWJlcjtcclxuICBwcml2YXRlIF9udW1QYWdlczogbnVtYmVyO1xyXG4gIHByaXZhdGUgX2N1cnJlbnRQYWdlRGF0YTogYW55O1xyXG4gIHByaXZhdGUgX2Ftb3VudFBlclBhZ2U6IG51bWJlcjtcclxuXHJcbiAgcHJpdmF0ZSBfc291cmNlQXJyYXk6IG9iamVjdFtdO1xyXG4gIHByaXZhdGUgX3NvdXJjZVN0cmluZzogc3RyaW5nO1xyXG5cclxuICBwcml2YXRlIF9wYXRoVG9MaXN0Pzogc3RyaW5nO1xyXG4gIHByaXZhdGUgX3BhdGhUb1RvdGFsUmVzdWx0cz86IHN0cmluZztcclxuICBwcml2YXRlIF9vblBhZ2VDaGFuZ2U6ICggcGFnZTogbnVtYmVyICkgPT4gdm9pZDtcclxuICBwcml2YXRlIF9vbkZldGNoU3RhcnQ6ICgpID0+IHZvaWQ7XHJcbiAgcHJpdmF0ZSBfb25GZXRjaENvbXBsZXRlZDogKCBsaXN0SXRlbXM6IFtdLCBsaXN0TGVuZ3RoOiBudW1iZXIgKSA9PiB2b2lkO1xyXG4gIHByaXZhdGUgX2VsZW1lbnRSZW5kZXI6IFBhZ2luYXRpb25SZW5kZXI7XHJcblxyXG4gIHByaXZhdGUgX3NlYXJjaE9wdGlvbnM/OiBJUGFnaW5hdGlvblNlYXJjaE9wdGlvbnM7XHJcblxyXG4gIGNvbnN0cnVjdG9yKCBvcHRpb25zOiB7XHJcbiAgICBzZXR1cDogSVBhZ2luYXRpb25NYW5kYXRvcnlPcHRpb25zLFxyXG4gICAgc2VhcmNoT3B0aW9ucz86IElQYWdpbmF0aW9uU2VhcmNoT3B0aW9ucyxcclxuICAgIGhlYWRlck9wdGlvbnM/OiBJUGFnaW5hdGlvbkhlYWRlck9wdGlvbnMsXHJcbiAgICBjb250YWluZXJPcHRpb25zPzogSVBhZ2luYXRpb25Db250YWluZXJPcHRpb25zLFxyXG4gICAgZm9vdGVyT3B0aW9ucz86IElQYWdpbmF0aW9uRm9vdGVyT3B0aW9uc1xyXG4gIH0gKSB7XHJcbiAgICB0aGlzLl9pbmRleCA9IG9wdGlvbnMuc2V0dXAuY3VycmVudFBhZ2UgLSAxO1xyXG4gICAgdGhpcy5fcGF0aFRvTGlzdCA9IG9wdGlvbnMuc2V0dXAub2JqZWN0UGF0aFRvTGlzdDtcclxuICAgIHRoaXMuX3BhdGhUb1RvdGFsUmVzdWx0cyA9IG9wdGlvbnMuc2V0dXAub2JqZWN0UGF0aFRvVG90YWxSZXN1bHRzO1xyXG5cclxuICAgIHRoaXMuX29uUGFnZUNoYW5nZSA9IG9wdGlvbnMuc2V0dXAub25QYWdlQ2hhbmdlIHx8ICggKCkgPT4geyB9ICk7XHJcbiAgICB0aGlzLl9vbkZldGNoU3RhcnQgPSBvcHRpb25zLnNldHVwLm9uRmV0Y2hTdGFydCB8fCAoICgpID0+IHsgfSApO1xyXG4gICAgdGhpcy5fb25GZXRjaENvbXBsZXRlZCA9IG9wdGlvbnMuc2V0dXAub25GZXRjaENvbXBsZXRlZCB8fCAoICgpID0+IHsgfSApO1xyXG5cclxuICAgIHRoaXMuX3NvdXJjZVN0cmluZyA9IFBhZ2luYXRpb24uaXNTb3VyY2VTdHJpbmcoIG9wdGlvbnMuc2V0dXAuc291cmNlICkgPyBvcHRpb25zLnNldHVwLnNvdXJjZSA6ICcnO1xyXG4gICAgdGhpcy5fc291cmNlQXJyYXkgPSBQYWdpbmF0aW9uLmlzU291cmNlQXJyYXkoIG9wdGlvbnMuc2V0dXAuc291cmNlICkgPyBvcHRpb25zLnNldHVwLnNvdXJjZSA6IFtdO1xyXG5cclxuICAgIHRoaXMuX2Ftb3VudFBlclBhZ2UgPSBvcHRpb25zLnNldHVwLmFtb3VudFBlclBhZ2U7XHJcbiAgICB0aGlzLl9udW1QYWdlcyA9IHRoaXMuX2Ftb3VudFBlclBhZ2UgPiAwID8gTWF0aC5jZWlsKCB0aGlzLl9zb3VyY2VBcnJheS5sZW5ndGggLyB0aGlzLl9hbW91bnRQZXJQYWdlICkgOiAxO1xyXG5cclxuICAgIHRoaXMuX3NlYXJjaE9wdGlvbnMgPSBvcHRpb25zPy5zZWFyY2hPcHRpb25zO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnRSZW5kZXIgPSBuZXcgUGFnaW5hdGlvblJlbmRlciggdGhpcywgb3B0aW9ucyApO1xyXG5cclxuICAgIHRoaXMucGVlayggdGhpcy5faW5kZXggKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXQgY3VycmVudFBhZ2VEYXRhKCBuZXdQYWdlRGF0YTogYW55ICkge1xyXG4gICAgdGhpcy5fY3VycmVudFBhZ2VEYXRhID0gbmV3UGFnZURhdGE7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IGN1cnJlbnRQYWdlRGF0YSgpOiBhbnkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRQYWdlRGF0YTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgc291cmNlQXJyYXkoKTogb2JqZWN0W10ge1xyXG4gICAgcmV0dXJuIHRoaXMuX3NvdXJjZUFycmF5O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBzb3VyY2VTdHJpbmcoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLl9zb3VyY2VTdHJpbmc7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IGluZGV4KCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5kZXg7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IG51bVBhZ2VzKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5fbnVtUGFnZXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IGFtb3VudFBlclBhZ2UoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLl9hbW91bnRQZXJQYWdlO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgbmV4dCgpIHtcclxuICAgIGF3YWl0IHRoaXMucGVlayggdGhpcy5faW5kZXggKyAxICk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBwcmV2aW91cygpIHtcclxuICAgIGF3YWl0IHRoaXMucGVlayggdGhpcy5faW5kZXggLSAxICk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBwZWVrKCBwYWdlSW5kZXg6IG51bWJlciApIHtcclxuICAgIGNvbnN0IHByZXZJbmRleCA9IHRoaXMuX2luZGV4ID4gMCA/IHRoaXMuX2luZGV4IDogMDtcclxuXHJcbiAgICBwYWdlSW5kZXggPSBNYXRoVG9vbHMuY2xhbXAoIHBhZ2VJbmRleCwgMCwgcGFnZUluZGV4ICk7XHJcbiAgICB0aGlzLl9pbmRleCA9IHRoaXMuX3NvdXJjZVN0cmluZyA/IHBhZ2VJbmRleCA6IE1hdGhUb29scy5jbGFtcCggcGFnZUluZGV4LCAwLCB0aGlzLl9udW1QYWdlcyAtIDEgKTtcclxuXHJcbiAgICBpZiAoIHRoaXMuX3NvdXJjZVN0cmluZyAmJiAhKCBhd2FpdCB0aGlzLl9lbGVtZW50UmVuZGVyLnRyeVJlbmRlckN1cnJlbnRQYWdlTGlzdCgpICkgKSB7XHJcbiAgICAgIHRoaXMuX2luZGV4ID0gcHJldkluZGV4O1xyXG4gICAgfSBlbHNlIGlmICggdGhpcy5fc291cmNlQXJyYXkgKSB7XHJcbiAgICAgIGF3YWl0IHRoaXMuX2VsZW1lbnRSZW5kZXIudHJ5UmVuZGVyQ3VycmVudFBhZ2VMaXN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fb25QYWdlQ2hhbmdlKCB0aGlzLl9pbmRleCApO1xyXG5cclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoICcuYnRuLXBhZ2luYXRpb24uYWN0aXZlJyApLmZvckVhY2goIGVsZW1lbnQgPT4gZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCAnYWN0aXZlJyApICk7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggdGhpcy5fZWxlbWVudFJlbmRlci5nZXRCdXR0b25JZCggdGhpcy5faW5kZXggKSApPy5jbGFzc0xpc3QuYWRkKCAnYWN0aXZlJyApO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnRSZW5kZXIucmVzZXRGb290ZXIoKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGZldGNoQ3VycmVudFBhZ2UoKTogUHJvbWlzZTxvYmplY3RbXT4ge1xyXG4gICAgaWYgKCAhdGhpcy5fc291cmNlU3RyaW5nICkgcmV0dXJuIG5ldyBBcnJheTxvYmplY3Q+KCk7XHJcblxyXG4gICAgdGhpcy5fb25GZXRjaFN0YXJ0KCk7XHJcblxyXG4gICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goIHRoaXMuX3NvdXJjZVN0cmluZywge1xyXG4gICAgICBtZXRob2Q6IHRoaXMuX3NlYXJjaE9wdGlvbnM/Lm1ldGhvZCB8fCAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX3NlYXJjaE9wdGlvbnM/LmhlYWRlcnMgfHwgeyAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLCAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KCB7IC4uLnRoaXMuX3NlYXJjaE9wdGlvbnM/LnBhcmFtZXRlcnMsIC4uLnRoaXMuZ2V0U2VhcmNoQXJndW1lbnRzKCkgfSApXHJcbiAgICB9IClcclxuICAgICAgLnRoZW4oIGQgPT4gZC5qc29uKCkgKTtcclxuXHJcbiAgICAvLy8gSWYgdXNlciBkZWZpbmVzIGEgcGF0aCB0byBhIGNvdW50IG9mIGl0ZW1zIHRoZW4gZmluZHMgaXQgYW5kIHJlc2V0IGZvb3RlclxyXG4gICAgbGV0IHJlc3BvbnNlQ291bnQgPSAtMTtcclxuICAgIGlmICggdGhpcy5fcGF0aFRvVG90YWxSZXN1bHRzICkge1xyXG4gICAgICBjb25zdCBwYXRoVG9Db3VudCA9IHRoaXMuX3BhdGhUb1RvdGFsUmVzdWx0cy5zcGxpdCggJy4nICk7XHJcbiAgICAgIGxldCB0bXBJdGVyYXRvclJlc3BvbnNlID0gcmVzcG9uc2U7XHJcbiAgICAgIHBhdGhUb0NvdW50LmZvckVhY2goIHAgPT4gdHlwZW9mIHRtcEl0ZXJhdG9yUmVzcG9uc2VbcF0gPT09ICdzdHJpbmcnXHJcbiAgICAgICAgPyB0bXBJdGVyYXRvclJlc3BvbnNlID0gSlNPTi5wYXJzZSggdG1wSXRlcmF0b3JSZXNwb25zZVtwXSApXHJcbiAgICAgICAgOiB0bXBJdGVyYXRvclJlc3BvbnNlID0gdG1wSXRlcmF0b3JSZXNwb25zZVtwXSApO1xyXG5cclxuICAgICAgaWYgKCB0eXBlb2YgdG1wSXRlcmF0b3JSZXNwb25zZSA9PT0gJ251bWJlcicgKSB7XHJcbiAgICAgICAgcmVzcG9uc2VDb3VudCA9IHRtcEl0ZXJhdG9yUmVzcG9uc2U7XHJcbiAgICAgICAgdGhpcy5fbnVtUGFnZXMgPSB0aGlzLl9hbW91bnRQZXJQYWdlID4gMCA/IE1hdGguY2VpbCggcmVzcG9uc2VDb3VudCAvIHRoaXMuX2Ftb3VudFBlclBhZ2UgKSA6IDE7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudFJlbmRlci5yZXNldEZvb3RlcigpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8vIElmIHVzZXIgZGVmaW5lcyBhIHBhdGggdG8gYSBsaXN0IG9mIGl0ZW1zIHRoZW4gcmV0dXJuIHRoaXMgbGlzdCBpbnN0ZWFkXHJcbiAgICBpZiAoIHRoaXMuX3BhdGhUb0xpc3QgKSB7XHJcbiAgICAgIGNvbnN0IHBhdGhBcnJheSA9IHRoaXMuX3BhdGhUb0xpc3Quc3BsaXQoICcuJyApO1xyXG4gICAgICBwYXRoQXJyYXkuZm9yRWFjaCggcCA9PiB0eXBlb2YgcmVzcG9uc2VbcF0gPT09ICdzdHJpbmcnXHJcbiAgICAgICAgPyByZXNwb25zZSA9IEpTT04ucGFyc2UoIHJlc3BvbnNlW3BdIClcclxuICAgICAgICA6IHJlc3BvbnNlID0gcmVzcG9uc2VbcF0gKTtcclxuXHJcbiAgICAgIHRoaXMuX29uRmV0Y2hDb21wbGV0ZWQoIHJlc3BvbnNlLCByZXNwb25zZUNvdW50ICk7XHJcblxyXG4gICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCB0aGlzLl9vbkZldGNoQ29tcGxldGVkICkge1xyXG4gICAgICB0aGlzLl9vbkZldGNoQ29tcGxldGVkKCByZXNwb25zZSwgcmVzcG9uc2VDb3VudCApO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXNwb25zZTtcclxuICB9XHJcblxyXG4gIGdldFNlYXJjaEFyZ3VtZW50cygpOiBvYmplY3Qge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcGFnZTogdGhpcy5faW5kZXggKyAxLFxyXG4gICAgICBhbW91bnQ6IHRoaXMuX2Ftb3VudFBlclBhZ2VcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBpc1NvdXJjZVN0cmluZyggc291cmNlOiBzdHJpbmcgfCBvYmplY3RbXSApOiBzb3VyY2UgaXMgc3RyaW5nIHtcclxuICAgIHJldHVybiB0eXBlb2Ygc291cmNlID09PSAnc3RyaW5nJztcclxuICB9XHJcblxyXG4gIHN0YXRpYyBpc1NvdXJjZUFycmF5KCBzb3VyY2U6IHN0cmluZyB8IG9iamVjdFtdICk6IHNvdXJjZSBpcyBvYmplY3RbXSB7XHJcbiAgICByZXR1cm4gIVBhZ2luYXRpb24uaXNTb3VyY2VTdHJpbmcoIHNvdXJjZSApO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiY2xhbXAiLCJudW0iLCJtaW4iLCJtYXgiLCJNYXRoIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJqb2luQXNTdHJpbmciLCJ0aGlzIiwicmVkdWNlIiwiYWNjIiwibmV4dCIsImdldFRvdGFsIiwidHJ1bmNhdGUiLCJpbmRleCIsImxlbmd0aCIsImRlY29yYXRvciIsInRydW5jYXRlT3B0aW9ucyIsIm5vdFRydW5jYXRlTGVmdCIsInVuZGVmaW5lZCIsInRydW5jYXRlTGVmdCIsInRydW5jYXRlTGVmdE5vdFN0YXJ0ZWQiLCJ0cnVuY2F0ZUxlZnRTdGFydCIsImZpcnN0VmFsdWVJbm5lckFycmF5Q2xhbXBlZCIsImlubmVyQXJyYXlUYWlsIiwic2xpY2UiLCJsZWZ0QXJyYXkiLCJwdXNoIiwibm90VHJ1bmNhdGVSaWdodCIsInRydW5jYXRlUmlnaHQiLCJ0cnVuY2F0ZVJpZ2h0Tm90U3RhcnRlZCIsInRydW5jYXRlUmlnaHRTdGFydCIsImxhc3RWYWx1ZUlubmVyQXJyYXlDbGFtcGVkIiwiaW5uZXJBcnJheUhlYWQiLCJyaWdodEFycmF5IiwidW5zaGlmdCIsInNoaWZ0IiwiSFRNTEVsZW1lbnQiLCJyZW1vdmVBbGxDaGlsZHJlbiIsImhhc0NoaWxkTm9kZXMiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJtYWtlQ292ZXIiLCJzdHlsZSIsImRpc3BsYXkiLCJ3aWR0aCIsImhlaWdodCIsInBvc2l0aW9uIiwidG9wIiwibGVmdCIsIlBhZ2luYXRpb25SZW5kZXIiLCJfcGFnaW5hdGlvbk1hbmFnZXIiLCJfY29udGFpbmVyRWxlbWVudCIsIl9saXN0RWxlbWVudCIsIl9mb290ZXJFbGVtZW50IiwiX2xpc3RJdGVtVGVtcGxhdGUiLCJfZW1wdHlMaXN0VGVtcGxhdGUiLCJfaGVhZGVyT3B0aW9ucyIsIl9jb250YWluZXJPcHRpb25zIiwiX2Zvb3Rlck9wdGlvbnMiLCJfbGlzdENvbnRhaW5lclRhZyIsImNvbnN0cnVjdG9yIiwicGFnaW5hdGlvbk9iamVjdCIsIm9wdGlvbnMiLCJoZWFkZXJPcHRpb25zIiwiY29udGFpbmVyT3B0aW9ucyIsImZvb3Rlck9wdGlvbnMiLCJzZXR1cCIsImxpc3RJdGVtVGVtcGxhdGUiLCJlbXB0eUxpc3RUZW1wbGF0ZSIsImxpc3RDb250YWluZXJUYWciLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250YWluZXJRdWVyeVNlbGVjdG9yIiwiY3JlYXRlRWxlbWVudCIsInJlbmRlckZvb3RlciIsImluc2VydEFkamFjZW50RWxlbWVudCIsInJlbmRlckxpc3RFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwic3BsaXQiLCJnZXRCdXR0b25JZCIsImlkIiwiY2FwaXRhbGl6ZUZpcnN0TGV0dGVyIiwiZ2V0SXRlbUxpc3RJZCIsImdldEZvb3RlcklkIiwiZ2V0RWxlbWVudEJ5SWQiLCJsaXN0RWxlbWVudCIsInJlc2V0Rm9vdGVyIiwic291cmNlU3RyaW5nIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwiY3VycmVudFBhZ2VEYXRhIiwidHJ5UmVuZGVyQ3VycmVudFBhZ2VMaXN0IiwiZmV0Y2hDdXJyZW50UGFnZSIsInNvdXJjZUFycmF5IiwiYW1vdW50UGVyUGFnZSIsImZvckVhY2giLCJlbGVtZW50IiwibGlFbGVtZW50IiwicmVtb3ZlIiwiZm9vdGVyIiwiYnRuUHJldiIsImJ0bk5leHQiLCJzZXRBdHRyaWJ1dGUiLCJpbm5lclRleHQiLCJwcmV2QnV0dG9uVGV4dCIsIm5leHRCdXR0b25UZXh0Iiwib25jbGljayIsInByZXZpb3VzIiwibWFrZUZvb3RlckJ1dHRvbkxpc3QiLCJidXR0b25Jbm5lckxpc3QiLCJ0cnVuY2F0ZUxlbmd0aCIsIm51bVBhZ2VzIiwia2V5cyIsIm1ha2VGb290ZXJCdXR0b24iLCJidG4iLCJidXR0b25DbGFzc0xpc3QiLCJwZWVrIiwiYnV0dG9uVGV4dEZvcm11bGEiLCJ0cnVuY2F0ZURlY29yYXRvciIsIlN0cmluZyIsImlzTnVsbE9yRW1wdHkiLCJzdWJzdHJpbmciLCJ0b1N0cmluZyIsInJlbW92ZUFjY2VudHMiLCJub3JtYWxpemUiLCJyZXBsYWNlIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJ6ZXJvQmVmb3JlIiwicGFkU3RhcnQiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIm4iLCJnZXR0ZXIiLCJfX2VzTW9kdWxlIiwiZCIsImEiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsIlBhZ2luYXRpb24iLCJfaW5kZXgiLCJfbnVtUGFnZXMiLCJfY3VycmVudFBhZ2VEYXRhIiwiX2Ftb3VudFBlclBhZ2UiLCJfc291cmNlQXJyYXkiLCJfc291cmNlU3RyaW5nIiwiX3BhdGhUb0xpc3QiLCJfcGF0aFRvVG90YWxSZXN1bHRzIiwiX29uUGFnZUNoYW5nZSIsIl9vbkZldGNoU3RhcnQiLCJfb25GZXRjaENvbXBsZXRlZCIsIl9lbGVtZW50UmVuZGVyIiwiX3NlYXJjaE9wdGlvbnMiLCJjdXJyZW50UGFnZSIsIm9iamVjdFBhdGhUb0xpc3QiLCJvYmplY3RQYXRoVG9Ub3RhbFJlc3VsdHMiLCJvblBhZ2VDaGFuZ2UiLCJvbkZldGNoU3RhcnQiLCJvbkZldGNoQ29tcGxldGVkIiwiaXNTb3VyY2VTdHJpbmciLCJzb3VyY2UiLCJpc1NvdXJjZUFycmF5IiwiY2VpbCIsInNlYXJjaE9wdGlvbnMiLCJuZXdQYWdlRGF0YSIsInBhZ2VJbmRleCIsInByZXZJbmRleCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwicGFyYW1ldGVycyIsImdldFNlYXJjaEFyZ3VtZW50cyIsInRoZW4iLCJqc29uIiwicmVzcG9uc2VDb3VudCIsInBhdGhUb0NvdW50IiwidG1wSXRlcmF0b3JSZXNwb25zZSIsInAiLCJwYXJzZSIsInBhZ2UiLCJhbW91bnQiXSwic291cmNlUm9vdCI6IiJ9