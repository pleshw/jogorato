var Scene;(()=>{"use strict";var e={631:()=>{HTMLElement.prototype.removeAllChildren=function(){for(;this.hasChildNodes();)this.firstChild&&this.removeChild(this.firstChild)},HTMLElement.prototype.makeCover=function(){this.style.display="flex",this.style.width="100%",this.style.height="100%",this.style.position="absolute",this.style.top="0",this.style.left="0"}},930:(e,t,n)=>{n.d(t,{Layer:()=>i}),n(631),n(936);class i{element;priority;backgroundStyle;backgroundImage;filter;classList;cursor;onClick;onMouseOver;onMouseDown;onMouseUp;constructor({priority:e,backgroundStyle:t,backgroundImage:n,filter:s,cursor:r,onClick:o,onMouseOver:a,onMouseDown:l,onMouseUp:h,classList:c}){this.priority=e,this.filter=s,this.backgroundStyle=t,this.backgroundImage=n,this.cursor=r,this.classList=c,this.onClick=o,this.onMouseOver=a,this.onMouseDown=l,this.onMouseUp=h,this.element=i.getLayerElement(this,this.priority,this.classList,this.backgroundStyle,this.backgroundImage,this.filter,this.cursor,this.onClick,this.onMouseOver,this.onMouseDown,this.onMouseUp)}setParent(e){if(e.insertAdjacentElement("beforeend",this.element),this.element.parentElement&&this.element.parentElement.id){const e=this.element.parentElement.id,t=this.element.parentElement.getElementsByClassName("layer").length-1;this.element.id=`layer${t}${e.capitalizeFirstLetter()}`}}setAsMainLayer(e){if(e.insertAdjacentElement("beforeend",this.element),this.element.parentElement&&this.element.parentElement.id){const e=this.element.parentElement.id;this.element.id=`mainLayer${e.capitalizeFirstLetter()}`}}static getLayerElement(e,t,n,i,s,r,o,a,l,h,c){const m=document.createElement("div");return m.classList.add(...n||[]),m.classList.add("layer"),m.makeCover(),m.style.zIndex=t>0?t.toString():"0",i&&(m.style.background=i),r&&(m.style.filter=r),o&&(m.style.cursor=o),a&&m.addEventListener("click",(()=>{a(e)})),l&&m.addEventListener("mouseover",(()=>{l(e)})),h&&m.addEventListener("mousedown",(()=>{h(e)})),c&&m.addEventListener("mouseup",(()=>{c(e)})),s&&this.setLayerBackgroundImage(m,s),m}static setLayerBackgroundImage(e,t){const n=document.createElement("img");n.src=t,n.style.userSelect="none",n.style.maxWidth="100%",n.style.height="auto",n.makeCover(),e.insertAdjacentElement("afterbegin",n)}}},936:()=>{String.prototype.isNullOrEmpty=function(){return"string"!=typeof this&&!this&&""!==this},String.prototype.truncate=function(e,t="..."){return(this.length>e?this.substring(0,e)+t:this).toString()},String.prototype.removeAccents=function(){return this.normalize("NFD").replace(/[\u0300-\u036f]/g,"")},String.prototype.capitalizeFirstLetter=function(){return"string"!=typeof this?"":this.charAt(0).toUpperCase()+this.substring(1)},String.prototype.zeroBefore=function(){return this.padStart(2,"0")}}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};(()=>{n.r(i),n.d(i,{Scene:()=>t});var e=n(930);class t{container;element;layers;components;mainLayer;mainLayerConfig;constructor({container:e,layers:t,components:n,mainLayerConfig:i}){this.container=e,this.mainLayerConfig=i,this.layers=t,this.components=n||[],this.element=document.createElement("div"),this.components.forEach((e=>this.element.insertAdjacentElement("beforeend",e.container)))}async build(){this.container.classList.add("scene-container"),this.element.classList.add("scene"),this.setupLayers(),this.setElementStyle(),this.container.insertAdjacentElement("beforeend",this.element),this.components.forEach((async e=>await e.build(this)))}getMainLayer(){}get sceneCounter(){return this.container.querySelectorAll(`#${this.container.id} > .scene`).length}setupLayers(){this.container.id?this.element.id=`${this.container.id}${this.sceneCounter}`:(this.container.id=`sceneContainer${this.container.getElementsByClassName("scene-container").length}`,this.element.id=`scene${this.sceneCounter}`),this.layers.forEach((e=>{e.setParent(this.element)})),this.mainLayerConfig?(this.mainLayer=new e.Layer({...this.mainLayerConfig,priority:999}),this.mainLayer.setAsMainLayer(this.element)):(this.mainLayer=new e.Layer({priority:999}),this.mainLayer.setAsMainLayer(this.element))}setElementStyle(){this.container.style.position="relative",this.container.style.flexWrap="wrap",this.element.style.position="relative",this.element.style.display="flex",this.element.style.width="100vw",this.element.style.height="100vh",this.element.style.left="0",this.element.style.top="0",this.element.style.overflow="hidden"}}})(),Scene=i})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S2EsUUFBUVIsTUFBTUUsTUFBUSxRQUMzQlAsS0FBS2EsUUFBUVIsTUFBTUcsT0FBUyxRQUM1QlIsS0FBS2EsUUFBUVIsTUFBTU0sS0FBTyxJQUMxQlgsS0FBS2EsUUFBUVIsTUFBTUssSUFBTSxJQUN6QlYsS0FBS2EsUUFBUVIsTUFBTXVHLFNBQVcsUUFDaEMsRSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL0RPTUV4dGVuc2lvbnMudHMiLCJ3ZWJwYWNrOi8vLy4vTGF5ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vU3RyaW5nRXh0ZW5zaW9ucy50cyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vLy4vU2NlbmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW50ZXJmYWNlIEhUTUxFbGVtZW50IHtcclxuICByZW1vdmVBbGxDaGlsZHJlbigpOiB2b2lkO1xyXG4gIG1ha2VDb3ZlcigpOiB2b2lkO1xyXG59XHJcblxyXG5IVE1MRWxlbWVudC5wcm90b3R5cGUucmVtb3ZlQWxsQ2hpbGRyZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgd2hpbGUgKCB0aGlzLmhhc0NoaWxkTm9kZXMoKSApIHtcclxuICAgIGlmICggdGhpcy5maXJzdENoaWxkICkge1xyXG4gICAgICB0aGlzLnJlbW92ZUNoaWxkKCB0aGlzLmZpcnN0Q2hpbGQgKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbkhUTUxFbGVtZW50LnByb3RvdHlwZS5tYWtlQ292ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgdGhpcy5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gIHRoaXMuc3R5bGUud2lkdGggPSAnMTAwJSc7XHJcbiAgdGhpcy5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XHJcbiAgdGhpcy5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgdGhpcy5zdHlsZS50b3AgPSAnMCc7XHJcbiAgdGhpcy5zdHlsZS5sZWZ0ID0gJzAnO1xyXG59XHJcbiIsImltcG9ydCAnLi9ET01FeHRlbnNpb25zJztcclxuaW1wb3J0ICcuL1N0cmluZ0V4dGVuc2lvbnMnO1xyXG5cclxuZXhwb3J0IHR5cGUgTGF5ZXJDb25maWcgPSB7XHJcbiAgcHJpb3JpdHk6IG51bWJlcjtcclxuICBiYWNrZ3JvdW5kU3R5bGU/OiBzdHJpbmc7XHJcbiAgYmFja2dyb3VuZEltYWdlPzogc3RyaW5nLFxyXG4gIGNsYXNzTGlzdD86IHN0cmluZ1tdLFxyXG4gIGZpbHRlcj86IHN0cmluZztcclxuICBjdXJzb3I/OiBzdHJpbmc7XHJcbiAgb25DbGljaz86ICggbGF5ZXI6IExheWVyICkgPT4gdm9pZDtcclxuICBvbk1vdXNlT3Zlcj86ICggbGF5ZXI6IExheWVyICkgPT4gdm9pZDtcclxuICBvbk1vdXNlRG93bj86ICggbGF5ZXI6IExheWVyICkgPT4gdm9pZDtcclxuICBvbk1vdXNlVXA/OiAoIGxheWVyOiBMYXllciApID0+IHZvaWQ7XHJcbn07XHJcblxyXG5leHBvcnQgY2xhc3MgTGF5ZXIge1xyXG4gIHB1YmxpYyBlbGVtZW50OiBIVE1MRWxlbWVudDtcclxuICBwdWJsaWMgcHJpb3JpdHk6IG51bWJlcjtcclxuICBwdWJsaWMgYmFja2dyb3VuZFN0eWxlPzogc3RyaW5nO1xyXG4gIHB1YmxpYyBiYWNrZ3JvdW5kSW1hZ2U/OiBzdHJpbmc7XHJcbiAgcHVibGljIGZpbHRlcj86IHN0cmluZztcclxuICBwdWJsaWMgY2xhc3NMaXN0Pzogc3RyaW5nW107XHJcblxyXG4gIHB1YmxpYyBjdXJzb3I/OiBzdHJpbmc7XHJcbiAgb25DbGljaz86ICggbGF5ZXI6IExheWVyICkgPT4gdm9pZDtcclxuICBvbk1vdXNlT3Zlcj86ICggbGF5ZXI6IExheWVyICkgPT4gdm9pZDtcclxuICBvbk1vdXNlRG93bj86ICggbGF5ZXI6IExheWVyICkgPT4gdm9pZDtcclxuICBvbk1vdXNlVXA/OiAoIGxheWVyOiBMYXllciApID0+IHZvaWQ7XHJcblxyXG4gIGNvbnN0cnVjdG9yKCB7IHByaW9yaXR5LCBiYWNrZ3JvdW5kU3R5bGUsIGJhY2tncm91bmRJbWFnZSwgZmlsdGVyLCBjdXJzb3IsIG9uQ2xpY2ssIG9uTW91c2VPdmVyLCBvbk1vdXNlRG93biwgb25Nb3VzZVVwLCBjbGFzc0xpc3QgfTogTGF5ZXJDb25maWcgKSB7XHJcbiAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XHJcbiAgICB0aGlzLmZpbHRlciA9IGZpbHRlcjtcclxuICAgIHRoaXMuYmFja2dyb3VuZFN0eWxlID0gYmFja2dyb3VuZFN0eWxlO1xyXG4gICAgdGhpcy5iYWNrZ3JvdW5kSW1hZ2UgPSBiYWNrZ3JvdW5kSW1hZ2U7XHJcbiAgICB0aGlzLmN1cnNvciA9IGN1cnNvcjtcclxuICAgIHRoaXMuY2xhc3NMaXN0ID0gY2xhc3NMaXN0O1xyXG4gICAgdGhpcy5vbkNsaWNrID0gb25DbGljaztcclxuICAgIHRoaXMub25Nb3VzZU92ZXIgPSBvbk1vdXNlT3ZlcjtcclxuICAgIHRoaXMub25Nb3VzZURvd24gPSBvbk1vdXNlRG93bjtcclxuICAgIHRoaXMub25Nb3VzZVVwID0gb25Nb3VzZVVwO1xyXG4gICAgdGhpcy5lbGVtZW50ID0gTGF5ZXIuZ2V0TGF5ZXJFbGVtZW50KFxyXG4gICAgICB0aGlzLFxyXG4gICAgICB0aGlzLnByaW9yaXR5LFxyXG4gICAgICB0aGlzLmNsYXNzTGlzdCxcclxuICAgICAgdGhpcy5iYWNrZ3JvdW5kU3R5bGUsXHJcbiAgICAgIHRoaXMuYmFja2dyb3VuZEltYWdlLFxyXG4gICAgICB0aGlzLmZpbHRlcixcclxuICAgICAgdGhpcy5jdXJzb3IsXHJcbiAgICAgIHRoaXMub25DbGljayxcclxuICAgICAgdGhpcy5vbk1vdXNlT3ZlcixcclxuICAgICAgdGhpcy5vbk1vdXNlRG93bixcclxuICAgICAgdGhpcy5vbk1vdXNlVXBcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0UGFyZW50KCBlbGVtZW50OiBIVE1MRWxlbWVudCApIHtcclxuICAgIGVsZW1lbnQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCAnYmVmb3JlZW5kJywgdGhpcy5lbGVtZW50ICk7XHJcblxyXG4gICAgaWYgKCB0aGlzLmVsZW1lbnQucGFyZW50RWxlbWVudCAmJiB0aGlzLmVsZW1lbnQucGFyZW50RWxlbWVudC5pZCApIHtcclxuICAgICAgY29uc3QgcGFyZW50SWQgPSB0aGlzLmVsZW1lbnQucGFyZW50RWxlbWVudC5pZDtcclxuICAgICAgY29uc3QgbnVtTGF5ZXJzID0gdGhpcy5lbGVtZW50LnBhcmVudEVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSggJ2xheWVyJyApLmxlbmd0aCAtIDE7XHJcbiAgICAgIHRoaXMuZWxlbWVudC5pZCA9IGBsYXllciR7IG51bUxheWVycyB9JHsgcGFyZW50SWQuY2FwaXRhbGl6ZUZpcnN0TGV0dGVyKCkgfWA7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0QXNNYWluTGF5ZXIoIGVsZW1lbnQ6IEhUTUxFbGVtZW50ICkge1xyXG4gICAgZWxlbWVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoICdiZWZvcmVlbmQnLCB0aGlzLmVsZW1lbnQgKTtcclxuXHJcbiAgICBpZiAoIHRoaXMuZWxlbWVudC5wYXJlbnRFbGVtZW50ICYmIHRoaXMuZWxlbWVudC5wYXJlbnRFbGVtZW50LmlkICkge1xyXG4gICAgICBjb25zdCBwYXJlbnRJZCA9IHRoaXMuZWxlbWVudC5wYXJlbnRFbGVtZW50LmlkO1xyXG4gICAgICB0aGlzLmVsZW1lbnQuaWQgPSBgbWFpbkxheWVyJHsgcGFyZW50SWQuY2FwaXRhbGl6ZUZpcnN0TGV0dGVyKCkgfWA7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHN0YXRpYyBnZXRMYXllckVsZW1lbnQoIGxheWVyOiBMYXllciwgcHJpb3JpdHk6IG51bWJlciwgY2xhc3NMaXN0Pzogc3RyaW5nW10sIGJhY2tncm91bmRTdHlsZT86IHN0cmluZywgYmFja2dyb3VuZEltYWdlPzogc3RyaW5nLCBmaWx0ZXI/OiBzdHJpbmcsIGN1cnNvcj86IHN0cmluZywgb25DbGljaz86ICggbGF5ZXI6IExheWVyICkgPT4gdm9pZCwgb25Nb3VzZU92ZXI/OiAoIGxheWVyOiBMYXllciApID0+IHZvaWQsIG9uTW91c2VEb3duPzogKCBsYXllcjogTGF5ZXIgKSA9PiB2b2lkLCBvbk1vdXNlVXA/OiAoIGxheWVyOiBMYXllciApID0+IHZvaWQgKTogSFRNTEVsZW1lbnQge1xyXG4gICAgY29uc3QgbGF5ZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnZGl2JyApO1xyXG5cclxuICAgIGxheWVyRGl2LmNsYXNzTGlzdC5hZGQoIC4uLiggY2xhc3NMaXN0IHx8IFtdICkgKTtcclxuICAgIGxheWVyRGl2LmNsYXNzTGlzdC5hZGQoICdsYXllcicgKTtcclxuICAgIGxheWVyRGl2Lm1ha2VDb3ZlcigpO1xyXG4gICAgbGF5ZXJEaXYuc3R5bGUuekluZGV4ID0gcHJpb3JpdHkgPiAwID8gcHJpb3JpdHkudG9TdHJpbmcoKSA6ICcwJztcclxuXHJcbiAgICBpZiAoIGJhY2tncm91bmRTdHlsZSApIHtcclxuICAgICAgbGF5ZXJEaXYuc3R5bGUuYmFja2dyb3VuZCA9IGJhY2tncm91bmRTdHlsZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIGZpbHRlciApIHtcclxuICAgICAgbGF5ZXJEaXYuc3R5bGUuZmlsdGVyID0gZmlsdGVyO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICggY3Vyc29yICkge1xyXG4gICAgICBsYXllckRpdi5zdHlsZS5jdXJzb3IgPSBjdXJzb3I7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCBvbkNsaWNrICkge1xyXG4gICAgICBsYXllckRpdi5hZGRFdmVudExpc3RlbmVyKCAnY2xpY2snLCAoKSA9PiB7IG9uQ2xpY2soIGxheWVyICkgfSApXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCBvbk1vdXNlT3ZlciApIHtcclxuICAgICAgbGF5ZXJEaXYuYWRkRXZlbnRMaXN0ZW5lciggJ21vdXNlb3ZlcicsICgpID0+IHsgb25Nb3VzZU92ZXIoIGxheWVyICkgfSApXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCBvbk1vdXNlRG93biApIHtcclxuICAgICAgbGF5ZXJEaXYuYWRkRXZlbnRMaXN0ZW5lciggJ21vdXNlZG93bicsICgpID0+IHsgb25Nb3VzZURvd24oIGxheWVyICkgfSApXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCBvbk1vdXNlVXAgKSB7XHJcbiAgICAgIGxheWVyRGl2LmFkZEV2ZW50TGlzdGVuZXIoICdtb3VzZXVwJywgKCkgPT4geyBvbk1vdXNlVXAoIGxheWVyICkgfSApXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCBiYWNrZ3JvdW5kSW1hZ2UgKSB7XHJcbiAgICAgIHRoaXMuc2V0TGF5ZXJCYWNrZ3JvdW5kSW1hZ2UoIGxheWVyRGl2LCBiYWNrZ3JvdW5kSW1hZ2UgKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBsYXllckRpdjtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3RhdGljIHNldExheWVyQmFja2dyb3VuZEltYWdlKCBsYXllckRpdjogSFRNTERpdkVsZW1lbnQsIGJhY2tncm91bmRJbWFnZTogc3RyaW5nICkge1xyXG4gICAgY29uc3QgaW1hZ2VFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2ltZycgKTtcclxuICAgIGltYWdlRWxlbWVudC5zcmMgPSBiYWNrZ3JvdW5kSW1hZ2U7XHJcbiAgICBpbWFnZUVsZW1lbnQuc3R5bGUudXNlclNlbGVjdCA9ICdub25lJztcclxuICAgIGltYWdlRWxlbWVudC5zdHlsZS5tYXhXaWR0aCA9ICcxMDAlJztcclxuICAgIGltYWdlRWxlbWVudC5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XHJcbiAgICBpbWFnZUVsZW1lbnQubWFrZUNvdmVyKCk7XHJcblxyXG4gICAgbGF5ZXJEaXYuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCAnYWZ0ZXJiZWdpbicsIGltYWdlRWxlbWVudCApO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbiIsIlxyXG5pbnRlcmZhY2UgU3RyaW5nIHtcclxuICB0cnVuY2F0ZSggbWF4OiBudW1iZXIsIGRlY29yYXRvcjogc3RyaW5nICk6IHN0cmluZztcclxuICByZW1vdmVBY2NlbnRzKCk6IHN0cmluZztcclxuICBjYXBpdGFsaXplRmlyc3RMZXR0ZXIoKTogc3RyaW5nO1xyXG4gIHplcm9CZWZvcmUoKTogc3RyaW5nO1xyXG4gIGlzTnVsbE9yRW1wdHkoKTogYm9vbGVhbjtcclxufVxyXG5cclxuU3RyaW5nLnByb3RvdHlwZS5pc051bGxPckVtcHR5ID0gZnVuY3Rpb24gKCk6IGJvb2xlYW4ge1xyXG4gIHJldHVybiB0eXBlb2YgdGhpcyAhPT0gJ3N0cmluZycgJiYgIXRoaXMgJiYgdGhpcyAhPT0gJyc7XHJcbn07XHJcblxyXG5TdHJpbmcucHJvdG90eXBlLnRydW5jYXRlID0gZnVuY3Rpb24gKCBtYXg6IG51bWJlciwgZGVjb3JhdG9yOiBzdHJpbmcgPSAnLi4uJyApOiBzdHJpbmcge1xyXG4gIHJldHVybiAoIHRoaXMubGVuZ3RoID4gbWF4ID8gdGhpcy5zdWJzdHJpbmcoIDAsIG1heCApICsgZGVjb3JhdG9yIDogdGhpcyApLnRvU3RyaW5nKCk7XHJcbn07XHJcblxyXG5TdHJpbmcucHJvdG90eXBlLnJlbW92ZUFjY2VudHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgcmV0dXJuIHRoaXMubm9ybWFsaXplKCAnTkZEJyApLnJlcGxhY2UoIC9bXFx1MDMwMC1cXHUwMzZmXS9nLCBcIlwiICk7XHJcbn1cclxuXHJcblN0cmluZy5wcm90b3R5cGUuY2FwaXRhbGl6ZUZpcnN0TGV0dGVyID0gZnVuY3Rpb24gKCk6IHN0cmluZyB7XHJcbiAgaWYgKCB0eXBlb2YgdGhpcyAhPT0gJ3N0cmluZycgKSB7XHJcbiAgICByZXR1cm4gJyc7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdGhpcy5jaGFyQXQoIDAgKS50b1VwcGVyQ2FzZSgpICsgdGhpcy5zdWJzdHJpbmcoIDEgKTtcclxufVxyXG5cclxuU3RyaW5nLnByb3RvdHlwZS56ZXJvQmVmb3JlID0gZnVuY3Rpb24gKCkge1xyXG4gIHJldHVybiB0aGlzLnBhZFN0YXJ0KCAyLCAnMCcgKTtcclxufSIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJpbXBvcnQgeyBMYXllciwgTGF5ZXJDb25maWcgfSBmcm9tICcuL0xheWVyJztcclxuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi9Db21wb25lbnQnO1xyXG5cclxuZXhwb3J0IHR5cGUgU2NlbmVDb25maWcgPSB7XHJcbiAgY29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICBsYXllcnM6IExheWVyW107XHJcbiAgY29tcG9uZW50cz86IENvbXBvbmVudFtdO1xyXG4gIG1haW5MYXllckNvbmZpZz86IExheWVyQ29uZmlnO1xyXG59O1xyXG5cclxuZXhwb3J0IGNsYXNzIFNjZW5lIHtcclxuICBwdWJsaWMgY29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICBwdWJsaWMgZWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcbiAgcHVibGljIGxheWVyczogTGF5ZXJbXTtcclxuICBwdWJsaWMgY29tcG9uZW50czogQ29tcG9uZW50W107XHJcbiAgcHVibGljIG1haW5MYXllcj86IExheWVyO1xyXG4gIHB1YmxpYyBtYWluTGF5ZXJDb25maWc/OiBMYXllckNvbmZpZztcclxuXHJcbiAgY29uc3RydWN0b3IoIHsgY29udGFpbmVyLCBsYXllcnMsIGNvbXBvbmVudHMsIG1haW5MYXllckNvbmZpZyB9OiBTY2VuZUNvbmZpZyApIHtcclxuICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG5cclxuICAgIHRoaXMubWFpbkxheWVyQ29uZmlnID0gbWFpbkxheWVyQ29uZmlnO1xyXG4gICAgdGhpcy5sYXllcnMgPSBsYXllcnM7XHJcbiAgICB0aGlzLmNvbXBvbmVudHMgPSBjb21wb25lbnRzIHx8IFtdO1xyXG5cclxuICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnICk7XHJcblxyXG4gICAgdGhpcy5jb21wb25lbnRzLmZvckVhY2goIGMgPT4gdGhpcy5lbGVtZW50Lmluc2VydEFkamFjZW50RWxlbWVudCggJ2JlZm9yZWVuZCcsIGMuY29udGFpbmVyICkgKVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGFzeW5jIGJ1aWxkKCkge1xyXG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZCggJ3NjZW5lLWNvbnRhaW5lcicgKTtcclxuICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCAnc2NlbmUnICk7XHJcbiAgICB0aGlzLnNldHVwTGF5ZXJzKCk7XHJcbiAgICB0aGlzLnNldEVsZW1lbnRTdHlsZSgpO1xyXG4gICAgdGhpcy5jb250YWluZXIuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCAnYmVmb3JlZW5kJywgdGhpcy5lbGVtZW50ICk7XHJcbiAgICB0aGlzLmNvbXBvbmVudHMuZm9yRWFjaCggYXN5bmMgYyA9PiBhd2FpdCBjLmJ1aWxkKCB0aGlzICkgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRNYWluTGF5ZXIoKSB7XHJcblxyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBzY2VuZUNvdW50ZXIoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCBgIyR7IHRoaXMuY29udGFpbmVyLmlkIH0gPiAuc2NlbmVgICkubGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgc2V0dXBMYXllcnMoKSB7XHJcbiAgICBpZiAoICF0aGlzLmNvbnRhaW5lci5pZCApIHtcclxuICAgICAgdGhpcy5jb250YWluZXIuaWQgPSBgc2NlbmVDb250YWluZXIkeyB0aGlzLmNvbnRhaW5lci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCAnc2NlbmUtY29udGFpbmVyJyApLmxlbmd0aCB9YDtcclxuICAgICAgdGhpcy5lbGVtZW50LmlkID0gYHNjZW5lJHsgdGhpcy5zY2VuZUNvdW50ZXIgfWA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmVsZW1lbnQuaWQgPSBgJHsgdGhpcy5jb250YWluZXIuaWQgfSR7IHRoaXMuc2NlbmVDb3VudGVyIH1gO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMubGF5ZXJzLmZvckVhY2goIGwgPT4ge1xyXG4gICAgICBsLnNldFBhcmVudCggdGhpcy5lbGVtZW50ICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgaWYgKCB0aGlzLm1haW5MYXllckNvbmZpZyApIHtcclxuICAgICAgdGhpcy5tYWluTGF5ZXIgPSBuZXcgTGF5ZXIoIHsgLi4udGhpcy5tYWluTGF5ZXJDb25maWcsIHByaW9yaXR5OiA5OTkgfSApO1xyXG4gICAgICB0aGlzLm1haW5MYXllci5zZXRBc01haW5MYXllciggdGhpcy5lbGVtZW50ICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLm1haW5MYXllciA9IG5ldyBMYXllciggeyBwcmlvcml0eTogOTk5IH0gKTtcclxuICAgICAgdGhpcy5tYWluTGF5ZXIuc2V0QXNNYWluTGF5ZXIoIHRoaXMuZWxlbWVudCApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RWxlbWVudFN0eWxlKCkge1xyXG4gICAgdGhpcy5jb250YWluZXIuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xyXG4gICAgdGhpcy5jb250YWluZXIuc3R5bGUuZmxleFdyYXAgPSAnd3JhcCc7XHJcblxyXG4gICAgdGhpcy5lbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcclxuICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gICAgdGhpcy5lbGVtZW50LnN0eWxlLndpZHRoID0gJzEwMHZ3JztcclxuICAgIHRoaXMuZWxlbWVudC5zdHlsZS5oZWlnaHQgPSAnMTAwdmgnO1xyXG4gICAgdGhpcy5lbGVtZW50LnN0eWxlLmxlZnQgPSAnMCc7XHJcbiAgICB0aGlzLmVsZW1lbnQuc3R5bGUudG9wID0gJzAnO1xyXG4gICAgdGhpcy5lbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbIkhUTUxFbGVtZW50IiwicHJvdG90eXBlIiwicmVtb3ZlQWxsQ2hpbGRyZW4iLCJ0aGlzIiwiaGFzQ2hpbGROb2RlcyIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsIm1ha2VDb3ZlciIsInN0eWxlIiwiZGlzcGxheSIsIndpZHRoIiwiaGVpZ2h0IiwicG9zaXRpb24iLCJ0b3AiLCJsZWZ0IiwiTGF5ZXIiLCJlbGVtZW50IiwicHJpb3JpdHkiLCJiYWNrZ3JvdW5kU3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJmaWx0ZXIiLCJjbGFzc0xpc3QiLCJjdXJzb3IiLCJvbkNsaWNrIiwib25Nb3VzZU92ZXIiLCJvbk1vdXNlRG93biIsIm9uTW91c2VVcCIsImNvbnN0cnVjdG9yIiwiZ2V0TGF5ZXJFbGVtZW50Iiwic2V0UGFyZW50IiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50IiwicGFyZW50RWxlbWVudCIsImlkIiwicGFyZW50SWQiLCJudW1MYXllcnMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwibGVuZ3RoIiwiY2FwaXRhbGl6ZUZpcnN0TGV0dGVyIiwic2V0QXNNYWluTGF5ZXIiLCJsYXllciIsImxheWVyRGl2IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYWRkIiwiekluZGV4IiwidG9TdHJpbmciLCJiYWNrZ3JvdW5kIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNldExheWVyQmFja2dyb3VuZEltYWdlIiwiaW1hZ2VFbGVtZW50Iiwic3JjIiwidXNlclNlbGVjdCIsIm1heFdpZHRoIiwiU3RyaW5nIiwiaXNOdWxsT3JFbXB0eSIsInRydW5jYXRlIiwibWF4IiwiZGVjb3JhdG9yIiwic3Vic3RyaW5nIiwicmVtb3ZlQWNjZW50cyIsIm5vcm1hbGl6ZSIsInJlcGxhY2UiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInplcm9CZWZvcmUiLCJwYWRTdGFydCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwibiIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkIiwiYSIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwiU2NlbmUiLCJjb250YWluZXIiLCJsYXllcnMiLCJjb21wb25lbnRzIiwibWFpbkxheWVyIiwibWFpbkxheWVyQ29uZmlnIiwiZm9yRWFjaCIsImMiLCJidWlsZCIsInNldHVwTGF5ZXJzIiwic2V0RWxlbWVudFN0eWxlIiwiYXN5bmMiLCJnZXRNYWluTGF5ZXIiLCJzY2VuZUNvdW50ZXIiLCJxdWVyeVNlbGVjdG9yQWxsIiwibCIsImZsZXhXcmFwIiwib3ZlcmZsb3ciXSwic291cmNlUm9vdCI6IiJ9